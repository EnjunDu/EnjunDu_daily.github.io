{
    "version": "https://jsonfeed.org/version/1",
    "title": "Hexo • All posts by \"嵩天的爱-ece-bc\" category",
    "description": "",
    "home_page_url": "https://enjundu.github.io",
    "items": [
        {
            "id": "https://enjundu.github.io/ECEBC/%E9%AB%98%E5%BE%B7%E6%89%BE%E6%88%BF/",
            "url": "https://enjundu.github.io/ECEBC/%E9%AB%98%E5%BE%B7%E6%89%BE%E6%88%BF/",
            "title": "高德找房",
            "date_published": "2024-07-08T17:41:31.000Z",
            "content_html": "<h1 id=\"项目介绍\"><a class=\"anchor\" href=\"#项目介绍\">#</a> 项目介绍</h1>\n<h2 id=\"高德开放平台\"><a class=\"anchor\" href=\"#高德开放平台\">#</a> 高德开放平台</h2>\n<p>高德开放平台是国内技术领先的 LBS 服务提供商，拥有先进的数据融合技术和海量的数据处理能力。</p>\n<p>高德开放平台为开发者提供了三项主要的能力：</p>\n<ul>\n<li>专业、易用的地图开发工具：API/SDK</li>\n<li>快捷的位置云计算：云图</li>\n<li>权威的位置大数据：高德位智</li>\n</ul>\n<h2 id=\"html\"><a class=\"anchor\" href=\"#html\">#</a> HTML</h2>\n<p>HTML 的全称为超文本标记语言，是一种标记语言。</p>\n<p>它包括一系列标签．通过这些标签可以将网络上的文档格式统一，使分散的 Internet 资源连接为一个逻辑整体。</p>\n<p>HTML 文本是由 HTML 命令组成的描述性文本，HTML 命令可以说明文字，图形、动画、声音、表格、链接等。</p>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;zh&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>我的第一个 HTML 页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>body 元素的内容会显示在浏览器中。<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>title 元素的内容会显示在浏览器的标题栏中。<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"javascript\"><a class=\"anchor\" href=\"#javascript\">#</a> JavaScript</h2>\n<p>JavaScript（简称 “JS”） 是一种具有函数优先的轻量级，解释型或即时编译型的编程语言。</p>\n<p>虽然它是作为开发 Web 页面的脚本语言而出名，但是它也被用到了很多非浏览器环境中，JavaScript 基于原型编程、多范式的动态脚本语言，并且支持面向对象、命令式、声明式、函数式编程范式。</p>\n<p>JavaScript 在 1995 年由 Netscape 公司的 Brendan Eich，在网景导航者浏览器上首次设计实现而成。</p>\n<p>因为 Netscape 与 Sun 合作，Netscape 管理层希望它外观看起来像 Java，因此取名为 JavaScript。</p>\n<p>但实际上它的语法风格与 Self 及 Scheme 较为接近。</p>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;zh&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>我的第一个 JavaScript 页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>我的第一段 JavaScript<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;document.getElementById(&#x27;demo&#x27;).innerHTML = Date()&quot;</span>&gt;</span></span><br><span class=\"line\">    点击这里来显示日期和时间</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"项目目标\"><a class=\"anchor\" href=\"#项目目标\">#</a> 项目目标</h1>\n<h2 id=\"主要目标\"><a class=\"anchor\" href=\"#主要目标\">#</a> 主要目标</h2>\n<p>从房源网站获取房源信息，使用高德地图 Web 端 (JS API) 以工作单位为中心，显示一小时通勤范围房源，并能够进行工作地点路径规划。</p>\n<h2 id=\"目标分解\"><a class=\"anchor\" href=\"#目标分解\">#</a> 目标分解</h2>\n<ul>\n<li>爬取房源信息</li>\n<li>清洗房源数据</li>\n<li>本地存储数据</li>\n<li>编写页面代码</li>\n</ul>\n<h2 id=\"技术选型\"><a class=\"anchor\" href=\"#技术选型\">#</a> 技术选型</h2>\n<h3 id=\"问题房源平台如何选择\"><a class=\"anchor\" href=\"#问题房源平台如何选择\">#</a> 问题：房源平台如何选择？</h3>\n<ul>\n<li>避免选取反爬虫机制过强的网站</li>\n<li>尽量选取房源名称和地址在列表上明显标出的网站，以避免嵌套爬取，造成大量资源开销</li>\n<li>尽量选取静态数据展示网页，避免动态接口变化或鉴权受阻</li>\n</ul>\n<h3 id=\"问题文件存储格式什么样\"><a class=\"anchor\" href=\"#问题文件存储格式什么样\">#</a> 问题：文件存储格式什么样？</h3>\n<ul>\n<li>CSV 格式，读写效率高，有模块可以辅助写入</li>\n<li>包含房源标题和房源地址，为了统一起见，分别位于 [0], [1] 列</li>\n<li>可拓展如房源链接等内容，作为地图信息点的拓展</li>\n</ul>\n<h3 id=\"问题如何申请高德开放api\"><a class=\"anchor\" href=\"#问题如何申请高德开放api\">#</a> 问题：如何申请高德开放 API？</h3>\n<ul>\n<li>在<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sYnMuYW1hcC5jb20v\">高德开放平台 | 高德地图 API</span> 上申请成为个人开发者，转到控制台</li>\n<li>在 “<strong>我的应用</strong>”-&gt; “<strong>应用管理</strong>”-&gt; “<strong>创建新应用</strong>” 处，填写信息，创建新应用</li>\n<li>在应用列表点击 “<strong>添加</strong>”<br />\n<img data-src=\"https://s2.loli.net/2024/07/09/HrDkdKUxb47oC1Z.png\" alt=\"image.png\" /></li>\n<li>填写 Key 名称，服务平台选择 <strong>Web 端（JS API）</strong>，同意并提交</li>\n<li>获得 Key 与安全密钥，此密钥将用于后续前端接口申请<br />\n<img data-src=\"https://s2.loli.net/2024/07/09/qawTYGDQ28AX7Np.png\" alt=\"image.png\" /></li>\n</ul>\n<p>注意：<strong>API Key 虽然在项目练习中可以共享，但实际生产环境中请勿共享自己的 Key 以及安全密钥</strong></p>\n<h2 id=\"课堂要求\"><a class=\"anchor\" href=\"#课堂要求\">#</a> 课堂要求</h2>\n<h3 id=\"提交项目结构\"><a class=\"anchor\" href=\"#提交项目结构\">#</a> 提交项目结构</h3>\n<p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">index.html          地图网页文件</span><br><span class=\"line\">scrap.py            爬虫文件</span><br><span class=\"line\">README.md\t\t\t项目描述说明文档</span><br><span class=\"line\">requirements.txt\t项目依赖包版本号（项目需要下载到本地执行，如果有第三方依赖包，必须填写）</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"标注核心算法函数位置\"><a class=\"anchor\" href=\"#标注核心算法函数位置\">#</a> 标注核心算法函数位置</h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 爬虫程序 位于scrap.py文件 第31行</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main</span>():</span><br><span class=\"line\">  \t<span class=\"string\">&quot;&quot;&quot;爬虫程序&quot;&quot;&quot;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure></p>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 地图程序 位于index.py文件 第96行</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"comment\">/*  ---------------------------</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">\t\t\t生成AMap.Map对象，类型&quot;container&quot;, 对象名 map</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">\t\t\t地图初始化城市和地图的一些属性</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">\t\t*/</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"keyword\">var</span> map = <span class=\"keyword\">new</span> <span class=\"title class_\">AMap</span>.<span class=\"title class_\">Map</span>(<span class=\"string\">&quot;container&quot;</span>, &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"attr\">resizeEnable</span>: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"attr\">zoomEnable</span>: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"attr\">center</span>: [<span class=\"number\">116.397</span>, <span class=\"number\">39.91</span>],</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"attr\">zoom</span>: <span class=\"number\">11</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t&#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  ...</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"程序运行效果截图\"><a class=\"anchor\" href=\"#程序运行效果截图\">#</a> 程序运行效果截图</h3>\n<p>界面样例如图所示：</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/ozZGpctmuxvMRlJ.png\" alt=\"image.png\" /></p>\n<p>具体房源信息如图所示：</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/mPkVvRrI158bxQw.png\" alt=\"image.png\" /></p>\n",
            "tags": [
                "Hexo",
                "Front Matter"
            ]
        },
        {
            "id": "https://enjundu.github.io/ECEBC/%E5%9B%BE%E5%83%8F%E9%9A%90%E5%86%99/",
            "url": "https://enjundu.github.io/ECEBC/%E5%9B%BE%E5%83%8F%E9%9A%90%E5%86%99/",
            "title": "图像隐写",
            "date_published": "2024-07-06T17:41:31.000Z",
            "content_html": "<h1 id=\"实验介绍\"><a class=\"anchor\" href=\"#实验介绍\">#</a> 实验介绍</h1>\n<h2 id=\"实践简介\"><a class=\"anchor\" href=\"#实践简介\">#</a> 实践简介</h2>\n<p>LSB 隐写术是一种图像隐写术技术，其中通过将每个像素的最低有效位替换为要隐藏的消息位来将消息隐藏在图像中。</p>\n<p>本实践需要同学们了解基本的图像处理以及图像隐写技术，使用 Python 或 C 语言编写 LSB 图像 <code>加密程序</code> 和 <code>解密程序</code> 。</p>\n<h2 id=\"相关概念\"><a class=\"anchor\" href=\"#相关概念\">#</a> 相关概念</h2>\n<p>为了更好地理解，让我们将数字图像视为像素的二维阵列，每个像素包含取决于其类型和深度的值，使用最广泛的颜色模式 RGB，这些值的范围为 0–255 之间。</p>\n<p>可以使用 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY3MuY211LmVkdS9+cGF0dGlzLzE1LTFYWC9jb21tb24vaGFuZG91dHMvYXNjaWkuaHRtbA==\">ASCII Table</span> 将消息转换为十进制值，然后再转换为二进制。</p>\n<p>然后，我们逐个迭代像素值，将它们转换为二进制后，我们将每个最低有效位替换为序列中的消息位。</p>\n<p>要解码编码图像，我们只需反转该过程。收集并存储每个像素的最后一位，然后将它们分成 8 组，并将其转换回 ASCII 字符以获取隐藏消息。</p>\n<h2 id=\"提交文件说明\"><a class=\"anchor\" href=\"#提交文件说明\">#</a> 提交文件说明</h2>\n<p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C</span><br><span class=\"line\">\t- LSB_decode.c \t解密程序编写文件</span><br><span class=\"line\">\t- LSB_encode.c \t加密程序编写文件</span><br><span class=\"line\">Python</span><br><span class=\"line\">\t- LSB_decode.py 解密程序编写文件</span><br><span class=\"line\">\t- LSB_encode.py\t加密程序编写文件</span><br><span class=\"line\">encode_image.png\t一张程序测试图片</span><br><span class=\"line\">encode_text.txt\t\t一张程序测试文本</span><br><span class=\"line\">README.md\t\t\t项目描述说明文档</span><br><span class=\"line\">requirements.txt\t项目依赖包版本号（项目需要下载到本地执行，如果有第三方依赖包，必须填写）</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"提交内容\"><a class=\"anchor\" href=\"#提交内容\">#</a> 提交内容</h2>\n<p>C 或 Python 语言相关程序代码，加解密程序读写文件使用相对路径，因为需要下载到本地运行评判，评判过程中不会修改代码。</p>\n<h2 id=\"如何评判\"><a class=\"anchor\" href=\"#如何评判\">#</a> 如何评判</h2>\n<ul>\n<li>程序是否能够执行</li>\n<li>能否进行图像加密</li>\n<li>能否进行图像解密</li>\n<li>程度代码是否规范</li>\n</ul>\n",
            "tags": [
                "Hexo",
                "Front Matter"
            ]
        },
        {
            "id": "https://enjundu.github.io/ECEBC/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/",
            "url": "https://enjundu.github.io/ECEBC/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/",
            "title": "动态规划",
            "date_published": "2024-07-06T17:41:31.000Z",
            "content_html": "<h1 id=\"项目介绍\"><a class=\"anchor\" href=\"#项目介绍\">#</a> 项目介绍</h1>\n<h2 id=\"项目背景\"><a class=\"anchor\" href=\"#项目背景\">#</a> 项目背景</h2>\n<h3 id=\"高楼扔鸡蛋\"><a class=\"anchor\" href=\"#高楼扔鸡蛋\">#</a> 高楼扔鸡蛋</h3>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/JsZmign31Lvle4x.png\" alt=\"image.png\" /></p>\n<h3 id=\"动态规划\"><a class=\"anchor\" href=\"#动态规划\">#</a> 动态规划</h3>\n<p>动态规划既是一种数学优化方法，也是一种计算机编程方法，该方法是由理查德・贝尔曼 (Richard Bellman) 在 20 世纪 50 年代开发的，已在从航空航天工程到经济学的许多领域中得到应用。</p>\n<p>在这两种情况下，它都指通过以递归方式将其分解为更简单的子问题来简化复杂的问题。虽然某些决策问题无法以这种方式解决，但跨越多个时间点的决策通常会递归地分解。同样，在计算机科学中，如果可以通过将问题分解为子问题，然后递归地找到子问题的最优解来最佳地解决问题，则称它具有最佳的子结构。</p>\n<p>如果子问题可以递归地嵌套在较大的问题中，以便动态规划方法适用，则较大问题的值与子问题的值之间存在关系。</p>\n<h2 id=\"项目目标\"><a class=\"anchor\" href=\"#项目目标\">#</a> 项目目标</h2>\n<h3 id=\"主要目标\"><a class=\"anchor\" href=\"#主要目标\">#</a> 主要目标</h3>\n<p>给你 k 个相同的水杯，并可以使用一栋从第 1 层到第 n 层共有 n 层楼的高层建筑。</p>\n<p>已知存在楼层 f ，满足 0 &lt;= f &lt;= n ，任何从 高于 f 的楼层落下的水杯都会碎，从 f 楼层或比它低的楼层落下的水杯都不会破。</p>\n<p>每次你可以拿一个没有碎的水杯并把它从任一楼层 x 扔下（满足 1 &lt;= x &lt;= n）。如果水杯碎了，你就不能再次使用它。如果某个水杯扔下后没有摔碎，则可以在之后的操作中重复使用这个水杯。</p>\n<p>请你计算并返回要确定 f 确切的值的最小操作次数是多少？</p>\n<h2 id=\"课堂要求\"><a class=\"anchor\" href=\"#课堂要求\">#</a> 课堂要求</h2>\n<h3 id=\"提交项目结构\"><a class=\"anchor\" href=\"#提交项目结构\">#</a> 提交项目结构</h3>\n<p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main.py\t\t\t\t主文件</span><br><span class=\"line\">README.md\t\t\t项目描述说明文档</span><br><span class=\"line\">requirements.txt\t项目依赖包版本号（项目需要下载到本地执行，如果有第三方依赖包，必须填写）</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"标注核心算法函数位置\"><a class=\"anchor\" href=\"#标注核心算法函数位置\">#</a> 标注核心算法函数位置</h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 位于 mian.py 文件 第15行</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">cup_drop</span>(<span class=\"params\">k: <span class=\"built_in\">int</span>, n: <span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">int</span>:</span><br><span class=\"line\">\t<span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"程序运行效果\"><a class=\"anchor\" href=\"#程序运行效果\">#</a> 程序运行效果</h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    number = cup_drop(k=<span class=\"number\">2</span>, n=<span class=\"number\">6</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(number)  <span class=\"comment\"># 3</span></span><br><span class=\"line\">    number = cup_drop(k=<span class=\"number\">3</span>, n=<span class=\"number\">14</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(number)  <span class=\"comment\"># 4</span></span><br></pre></td></tr></table></figure></p>\n",
            "tags": [
                "Hexo",
                "Front Matter"
            ]
        },
        {
            "id": "https://enjundu.github.io/ECEBC/example/",
            "url": "https://enjundu.github.io/ECEBC/example/",
            "title": "example",
            "date_published": "2024-07-06T17:41:31.000Z",
            "content_html": "",
            "tags": [
                "Hexo",
                "Front Matter"
            ]
        },
        {
            "id": "https://enjundu.github.io/ECEBC/%E7%94%B5%E5%BD%B1%E7%BD%91%E7%AB%99/",
            "url": "https://enjundu.github.io/ECEBC/%E7%94%B5%E5%BD%B1%E7%BD%91%E7%AB%99/",
            "title": "电影网站",
            "date_published": "2024-07-06T17:41:31.000Z",
            "content_html": "<h1 id=\"项目介绍\"><a class=\"anchor\" href=\"#项目介绍\">#</a> 项目介绍</h1>\n<h2 id=\"项目目标\"><a class=\"anchor\" href=\"#项目目标\">#</a> 项目目标</h2>\n<ul>\n<li>首页</li>\n<li>分类列表页</li>\n<li>详情页</li>\n<li>支持下载功能</li>\n<li>能够在后天进行增删改查工作</li>\n</ul>\n<h2 id=\"提交要求\"><a class=\"anchor\" href=\"#提交要求\">#</a> 提交要求</h2>\n<p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">README.md\t\t\t项目描述说明文档</span><br><span class=\"line\">requirements.txt\t项目依赖包版本号（项目需要下载到本地执行，如果有第三方依赖包，必须填写）</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"程序运行效果截图\"><a class=\"anchor\" href=\"#程序运行效果截图\">#</a> 程序运行效果截图</h2>\n<p>主页<img data-src=\"https://s2.loli.net/2024/07/09/ObTKZyozmj8SMFc.png\" alt=\"image.png\" /></p>\n<p>国内电影列表页</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/BE4Vs6y3SCqMn8U.png\" alt=\"image.png\" /></p>\n<p>日韩电影列表页</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/ZkBSET3NeHrn5Wx.png\" alt=\"image.png\" /></p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/mz1katXnD5Uq7js.png\" alt=\"image.png\" /></p>\n<p>电影详情页<img data-src=\"https://s2.loli.net/2024/07/09/bFvsPQ65xdhYVuC.png\" alt=\"image.png\" /></p>\n<p>后台登录页</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/Qp2a8wVmtjz3T4U.png\" alt=\"image.png\" /></p>\n<p>后台主页</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/PS1qV2t8TfDZ5EM.png\" alt=\"image.png\" /></p>\n<p>后台列表页</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/bgUd3fO5DNQR2nz.png\" alt=\"image.png\" /></p>\n<p>后台详情页</p>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/8YrSWxohjGJbIeF.png\" alt=\"image.png\" /></p>\n<h1 id=\"项目开始\"><a class=\"anchor\" href=\"#项目开始\">#</a> 项目开始</h1>\n<h2 id=\"项目结构\"><a class=\"anchor\" href=\"#项目结构\">#</a> 项目结构</h2>\n<p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">movie_website/</span><br><span class=\"line\">│</span><br><span class=\"line\">├── movies/</span><br><span class=\"line\">│   ├── migrations/</span><br><span class=\"line\">│   ├── templates/</span><br><span class=\"line\">│   ├── __init__.py</span><br><span class=\"line\">│   ├── admin.py</span><br><span class=\"line\">│   ├── apps.py</span><br><span class=\"line\">│   ├── forms.py</span><br><span class=\"line\">│   ├── models.py</span><br><span class=\"line\">│   ├── serializers.py</span><br><span class=\"line\">│   ├── tests.py</span><br><span class=\"line\">│   ├── urls.py</span><br><span class=\"line\">│   └── views.py</span><br><span class=\"line\">│</span><br><span class=\"line\">├── my_movie_site/</span><br><span class=\"line\">│   ├── __init__.py</span><br><span class=\"line\">│   ├── settings.py</span><br><span class=\"line\">│   ├── urls.py</span><br><span class=\"line\">│   └── wsgi.py</span><br><span class=\"line\">│</span><br><span class=\"line\">├── static/</span><br><span class=\"line\">│   ├── beijing.png</span><br><span class=\"line\">│   └── beijing_2.png</span><br><span class=\"line\">│</span><br><span class=\"line\">├── templates/</span><br><span class=\"line\">│</span><br><span class=\"line\">├── db.sqlite3</span><br><span class=\"line\">├── manage.py</span><br><span class=\"line\">└── requirements.txt</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"项目运行效果\"><a class=\"anchor\" href=\"#项目运行效果\">#</a> 项目运行效果</h2>\n<h2 id=\"界面介绍\"><a class=\"anchor\" href=\"#界面介绍\">#</a> 界面介绍</h2>\n<h3 id=\"首页\"><a class=\"anchor\" href=\"#首页\">#</a> 首页</h3>\n<ul>\n<li>\n<p>进入后显示 “首页”、” 电影推荐 “、” 下载排行 “、” 管理员入口 “、” 国内电影 “、” 日韩电影 “、” 欧美电影 “。</p>\n</li>\n<li>\n<p>底下这些框图选项往下拉会随机出现推荐的电影</p>\n</li>\n<li>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/3TnhelvLS4qIumQ.png\" alt=\"1.png\" /></p>\n</li>\n</ul>\n<h3 id=\"推荐页面\"><a class=\"anchor\" href=\"#推荐页面\">#</a> 推荐页面</h3>\n<ul>\n<li>点击电影推荐后会进入推荐页面，该页面包含了推荐的页面和简单介绍，点入详情可以跳转详情界面</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/tJYMOnpd5zsx7RS.png\" alt=\"2.png\" /></li>\n</ul>\n<h3 id=\"下载排行\"><a class=\"anchor\" href=\"#下载排行\">#</a> 下载排行</h3>\n<ul>\n<li>点击下载排行，可以进入下载排行界面</li>\n<li>进入下载排行后，可以看到下载数量最高的电影介绍，共出现下载量前十的电影介绍</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/KPOWhCTIGscq3pi.png\" alt=\"3.png\" /></li>\n</ul>\n<h3 id=\"详情页\"><a class=\"anchor\" href=\"#详情页\">#</a> 详情页</h3>\n<ul>\n<li>点击详情页后，可以看到电影的详细介绍</li>\n<li>包含电影的上映日期、类型、导演、演员、简介、语言、字幕、片长等</li>\n<li>点击下载电影可以跳转下载电影界面</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/FnRTYGXf7hec8Sm.png\" alt=\"8.png\" /></li>\n</ul>\n<h3 id=\"下载页\"><a class=\"anchor\" href=\"#下载页\">#</a> 下载页</h3>\n<ul>\n<li>点击下载电影后跳转下载页</li>\n<li>可以根据需求进行电影资源的下载</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/gaS97clmNB32DUK.png\" alt=\"9.png\" /></li>\n</ul>\n<h3 id=\"后台登录页\"><a class=\"anchor\" href=\"#后台登录页\">#</a> 后台登录页</h3>\n<ul>\n<li>点击管理员入口可以进入管理员登录页</li>\n<li><strong>账号为 jackdu，密码为 sky666666</strong></li>\n<li>输入正确账号密码后跳转后台</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/9bTL3cgHd28feI5.png\" alt=\"4.png\" /></li>\n</ul>\n<h3 id=\"后台界面1最近操作\"><a class=\"anchor\" href=\"#后台界面1最近操作\">#</a> 后台界面 1—— 最近操作</h3>\n<ul>\n<li>进入后天会显示近期进行的操作、可以进行电影的增加和修改、电影分类的增加和修改、账户的增加和修改等</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/fviEhwQ8u3j9GSI.png\" alt=\"5.png\" /></li>\n</ul>\n<h3 id=\"增加修改电影\"><a class=\"anchor\" href=\"#增加修改电影\">#</a> 增加 / 修改电影</h3>\n<ul>\n<li>对电影进行修改，填充电影的名字、上映日期、类型、导演、演员、简介、语言、字幕、片长、海报、下载链接等信息</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/2qZuapxGmhyiosR.png\" alt=\"6.png\" /></li>\n</ul>\n<h3 id=\"电影列表\"><a class=\"anchor\" href=\"#电影列表\">#</a> 电影列表</h3>\n<ul>\n<li>显示电影列表，可以进行批量操作</li>\n<li><img data-src=\"https://s2.loli.net/2024/07/09/3uWH7oRcCZ9LMUO.png\" alt=\"7.png\" /></li>\n</ul>\n<h2 id=\"设计思路\"><a class=\"anchor\" href=\"#设计思路\">#</a> 设计思路</h2>\n<h3 id=\"首页设计\"><a class=\"anchor\" href=\"#首页设计\">#</a> 首页设计</h3>\n<p>首页主要展示推荐电影、电影分类以及网站的主要功能链接。顶部有导航栏，包括首页、电影推荐、下载排行、管理员入口等。电影分类和推荐电影在页面中部显示，使用不同颜色的框进行填充以便用户区分。推荐电影包括电影海报、名称和评分，电影名称和评分居中显示。</p>\n<h3 id=\"详情页设计\"><a class=\"anchor\" href=\"#详情页设计\">#</a> 详情页设计</h3>\n<p>详情页显示电影的详细信息，包括海报、名称、评分、上映日期、类别、导演、演员、简介、语言、字幕和片长。下载链接使用淡紫色框包裹，字体为蓝色，点击后变为淡红色。</p>\n<h3 id=\"管理员入口\"><a class=\"anchor\" href=\"#管理员入口\">#</a> 管理员入口</h3>\n<p>在首页顶部增加管理员入口，点击后跳转至 /admin 页面，方便管理员进行后台管理。</p>\n<h2 id=\"注意这里的管理员账号为jackdu密码为sky666666\"><a class=\"anchor\" href=\"#注意这里的管理员账号为jackdu密码为sky666666\">#</a> <strong>注意，这里的管理员账号为 jackdu, 密码为 sky666666</strong></h2>\n<h2 id=\"安装和运行\"><a class=\"anchor\" href=\"#安装和运行\">#</a> 安装和运行</h2>\n<h3 id=\"环境依赖\"><a class=\"anchor\" href=\"#环境依赖\">#</a> 环境依赖</h3>\n<p>请确保已安装以下依赖项：</p>\n<ul>\n<li>Python 3.12</li>\n<li>Django 5.0.6</li>\n</ul>\n<p>可以通过以下命令安装项目所需的 Python 依赖：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install -r requirements.txt</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"数据库迁移\"><a class=\"anchor\" href=\"#数据库迁移\">#</a> 数据库迁移</h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python manage.py migrate</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"启动开发服务器\"><a class=\"anchor\" href=\"#启动开发服务器\">#</a> 启动开发服务器</h3>\n<p>使用以下命令启动开发服务器：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python manage.py runserver</span><br></pre></td></tr></table></figure></p>\n<p>如果想要让局域网的人均可看到，则以自己的 ip 地址来启动，通过 Win+R 后输入 cmd 回车后输入 ipconfig，找到自己的 ip 地址。</p>\n<p>然后在<strong> movie_website\\my_movie_site\\<span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span></strong> 这个 settings.py 代码里第 17 行修改 **ALLOWED_HOSTS = []** 代码</p>\n<p>将 [] 内加上自己的 ip 地址</p>\n<p>这里以我的 ip 地址 10.193.xx.xxx 为例：（请将 ip 地址替换为实际 ip）</p>\n<p>这里我就需要修改为  <code>ALLOWED_HOSTS = ['10.193.xx.xxx']</code></p>\n<p>修改后才能运行下列代码，但是如果不共享的话我更推荐直接使用  <code>python manage.py runserver</code></p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python manage.py runserver <span class=\"number\">10.193</span>.xx.xxx:<span class=\"number\">8000</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"访问网站\"><a class=\"anchor\" href=\"#访问网站\">#</a> 访问网站</h3>\n<p>在浏览器中输入以下地址访问网站：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8000</span>/</span><br></pre></td></tr></table></figure></p>\n<p>如果以 ip 地址启动，这里以我的 ip 地址为例，则输入</p>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://10.193.xx.xxx:8000/</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"主要功能\"><a class=\"anchor\" href=\"#主要功能\">#</a> 主要功能</h2>\n<h3 id=\"首页-2\"><a class=\"anchor\" href=\"#首页-2\">#</a> 首页</h3>\n<ul>\n<li>展示推荐电影</li>\n<li>提供电影分类链接</li>\n<li>导航栏包括首页、电影推荐、下载排行、管理员入口</li>\n</ul>\n<h3 id=\"电影详情页\"><a class=\"anchor\" href=\"#电影详情页\">#</a> 电影详情页</h3>\n<ul>\n<li>展示电影详细信息：海报、名称、评分、上映日期、类别、导演、演员、简介、语言、字幕、片长</li>\n<li><strong>提供下载链接，使用淡紫色框包裹，字体为蓝色</strong></li>\n<li>点击下载链接后可以进行下载</li>\n</ul>\n<h3 id=\"管理员入口-2\"><a class=\"anchor\" href=\"#管理员入口-2\">#</a> 管理员入口</h3>\n<ul>\n<li>方便管理员进行后台管理，跳转至 /admin 页面</li>\n</ul>\n<h3 id=\"国内电影\"><a class=\"anchor\" href=\"#国内电影\">#</a> 国内电影</h3>\n<ul>\n<li>展示了国内的部分高质量电影</li>\n</ul>\n<h3 id=\"日韩电影\"><a class=\"anchor\" href=\"#日韩电影\">#</a> 日韩电影</h3>\n<ul>\n<li>展示了日本和韩国的部分高质量电影</li>\n</ul>\n<h3 id=\"欧美电影\"><a class=\"anchor\" href=\"#欧美电影\">#</a> 欧美电影</h3>\n<ul>\n<li>展示了欧美的部分高质量电影</li>\n</ul>\n<h2 id=\"设计和实现流程\"><a class=\"anchor\" href=\"#设计和实现流程\">#</a> 设计和实现流程</h2>\n<ol>\n<li><strong>初始化项目</strong>：使用 <code>django-admin startproject</code>  命令创建 Django 项目，并创建应用 <code>movies</code> 。</li>\n<li><strong>设计数据库模型</strong>：在 <code>models.py</code>  中定义电影分类和电影模型，包含电影的各种属性。</li>\n<li><strong>设置 URL 路由</strong>：在 <code>urls.py</code>  中定义各个视图的 URL 路由，包括首页、详情页、推荐页、下载排行页和分类页。</li>\n<li><strong>实现视图函数</strong>：在 <code>views.py</code>  中编写各个视图函数，处理不同的请求并渲染相应的模板。</li>\n<li><strong>设计模板</strong>：在 <code>templates</code>  目录下创建各个页面的 HTML 模板，使用 Bootstrap 进行样式美化，确保页面响应式布局。</li>\n<li><strong>配置静态文件</strong>：在 <code>static</code>  目录下存放静态资源（如图片、CSS、JS 文件），并在模板中正确引用。</li>\n<li><strong>添加导航栏和样式</strong>：在 <code>base.html</code>  中设计统一的导航栏和样式，确保各个页面的一致性。</li>\n<li><strong>测试和调试</strong>：在本地进行测试，确保各个功能正常工作，并进行必要的调试和优化。</li>\n</ol>\n<h2 id=\"项目心得\"><a class=\"anchor\" href=\"#项目心得\">#</a> 项目心得</h2>\n<p>在这个项目中，我有幸设计并实现了一个完整的电影网站，从最初的构想到最终的实现，整个过程让我收获颇丰。</p>\n<h4 id=\"项目背景与动机\"><a class=\"anchor\" href=\"#项目背景与动机\">#</a> 项目背景与动机</h4>\n<p>作为一名对电影充满热情的开发者，我一直希望能够创建一个平台，不仅可以展示我喜爱的电影，还能为其他电影爱好者提供一个方便、直观的浏览和下载电影的途径。因此，我决定利用 Django 框架来开发这个电影网站项目。</p>\n<h4 id=\"设计与实现\"><a class=\"anchor\" href=\"#设计与实现\">#</a> 设计与实现</h4>\n<p>在项目初期，我进行了详细的需求分析，明确了网站的主要功能模块：电影展示、推荐、下载排行、分类浏览以及管理员后台管理。在设计数据库模型时，我特别注重电影的各项属性，如名称、简介、上映日期、类别、评分、语言、字幕、片长等，确保能全面展示电影信息。</p>\n<p>首页的设计是项目的重点之一。我希望首页能够直观地展示推荐电影和分类导航，于是采用了不同颜色的框进行填充，使得界面更加美观和易于区分。在细节方面，我确保电影的名称、评分等信息居中显示，提升用户体验。</p>\n<p>电影详情页的设计也同样重要。我加入了详细的电影信息展示，包括导演、演员、语言、字幕、片长等。此外，下载链接使用淡紫色框包裹，蓝色字体，在用户点击时变为淡红色，增强了交互体验。</p>\n<h4 id=\"遇到的挑战\"><a class=\"anchor\" href=\"#遇到的挑战\">#</a> 遇到的挑战</h4>\n<p>在项目过程中，我遇到了不少挑战。比如，如何确保电影信息的全面展示，如何设计美观且用户友好的界面，如何处理不同页面的跳转和导航。在遇到问题时，我通过查阅文档、参考示例代码以及请教同事，逐步解决了这些问题。</p>\n<p>另外，如何实现管理员后台管理功能也是一个难点。通过 Django 自带的 admin 功能，我快速搭建了后台管理界面，实现了电影数据的增删改查，提高了管理效率。</p>\n<h4 id=\"收获与反思\"><a class=\"anchor\" href=\"#收获与反思\">#</a> 收获与反思</h4>\n<p>整个项目下来，我不仅提升了自己的 Django 开发技能，也对 Web 开发有了更深的理解。通过这个项目，我学会了如何进行需求分析、数据库设计、前端页面布局以及后台管理系统的实现。</p>\n<p>在反思过程中，我认识到项目管理和时间管理的重要性。虽然最终顺利完成了项目，但在过程中有一些地方可以做得更好，比如更详细的需求文档、更严谨的代码测试等。</p>\n<h4 id=\"未来展望\"><a class=\"anchor\" href=\"#未来展望\">#</a> 未来展望</h4>\n<p>通过这个项目，我深刻体会到了 Django 框架的强大和灵活性。未来，我希望能继续完善这个电影网站项目，加入更多功能，比如用户评论、评分系统、电影搜索等。同时，我也期待能够在更多项目中应用所学，不断提升自己的技术水平。</p>\n<p>总的来说，这次项目让我受益匪浅，既锻炼了我的技术能力，也增强了我的项目管理能力。我相信，通过不断学习和实践，我能在 Web 开发领域走得更远。</p>\n<h1 id=\"项目代码\"><a class=\"anchor\" href=\"#项目代码\">#</a> 项目代码</h1>\n<h2 id=\"movies\"><a class=\"anchor\" href=\"#movies\">#</a> /movies</h2>\n<h3 id=\"initpy\"><a class=\"anchor\" href=\"#initpy\">#</a> <strong>init</strong>.py</h3>\n<h3 id=\"adminpy\"><a class=\"anchor\" href=\"#adminpy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL2FkbWluLnB5\">admin.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.contrib <span class=\"keyword\">import</span> admin</span><br><span class=\"line\"><span class=\"keyword\">from</span> .models <span class=\"keyword\">import</span> Category, Movie</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MovieAdmin</span>(admin.ModelAdmin):</span><br><span class=\"line\">    list_display = (<span class=\"string\">&#x27;title&#x27;</span>, <span class=\"string\">&#x27;downloads&#x27;</span>, <span class=\"string\">&#x27;is_recommended&#x27;</span>)</span><br><span class=\"line\">    list_filter = (<span class=\"string\">&#x27;is_recommended&#x27;</span>,)</span><br><span class=\"line\">    search_fields = (<span class=\"string\">&#x27;title&#x27;</span>,)</span><br><span class=\"line\">    list_editable = (<span class=\"string\">&#x27;downloads&#x27;</span>, <span class=\"string\">&#x27;is_recommended&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 检查是否已经注册，如果没有则注册</span></span><br><span class=\"line\"><span class=\"keyword\">try</span>:</span><br><span class=\"line\">    admin.site.register(Category)</span><br><span class=\"line\">    admin.site.register(Movie)</span><br><span class=\"line\">    admin.site.register(Movie, MovieAdmin)</span><br><span class=\"line\"><span class=\"keyword\">except</span> admin.sites.AlreadyRegistered:</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"appspy\"><a class=\"anchor\" href=\"#appspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL2FwcHMucHk=\">apps.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.apps <span class=\"keyword\">import</span> AppConfig</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MoviesConfig</span>(<span class=\"title class_ inherited__\">AppConfig</span>):</span><br><span class=\"line\">    default_auto_field = <span class=\"string\">&#x27;django.db.models.BigAutoField&#x27;</span></span><br><span class=\"line\">    name = <span class=\"string\">&#x27;movies&#x27;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"formspy\"><a class=\"anchor\" href=\"#formspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL2Zvcm1zLnB5\">forms.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django <span class=\"keyword\">import</span> forms</span><br><span class=\"line\"><span class=\"keyword\">from</span> .models <span class=\"keyword\">import</span> Movie</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MovieForm</span>(forms.ModelForm):</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Meta</span>:</span><br><span class=\"line\">        model = Movie</span><br><span class=\"line\">        fields = [</span><br><span class=\"line\">            <span class=\"string\">&#x27;title&#x27;</span>, <span class=\"string\">&#x27;description&#x27;</span>, <span class=\"string\">&#x27;release_date&#x27;</span>, <span class=\"string\">&#x27;category&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;download_link&#x27;</span>, <span class=\"string\">&#x27;poster_url&#x27;</span>, <span class=\"string\">&#x27;director&#x27;</span>, <span class=\"string\">&#x27;actors&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;rating&#x27;</span>, <span class=\"string\">&#x27;language&#x27;</span>, <span class=\"string\">&#x27;subtitles&#x27;</span>, <span class=\"string\">&#x27;duration&#x27;</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">        widgets = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;description&#x27;</span>: forms.Textarea(attrs=&#123;<span class=\"string\">&#x27;rows&#x27;</span>: <span class=\"number\">3</span>&#125;),</span><br><span class=\"line\">            <span class=\"string\">&#x27;actors&#x27;</span>: forms.Textarea(attrs=&#123;<span class=\"string\">&#x27;rows&#x27;</span>: <span class=\"number\">3</span>&#125;),</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        labels = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;title&#x27;</span>: <span class=\"string\">&#x27;名称&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;description&#x27;</span>: <span class=\"string\">&#x27;简介&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;release_date&#x27;</span>: <span class=\"string\">&#x27;上映日期&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;category&#x27;</span>: <span class=\"string\">&#x27;类别&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;download_link&#x27;</span>: <span class=\"string\">&#x27;下载链接&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;poster_url&#x27;</span>: <span class=\"string\">&#x27;海报图片地址&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;director&#x27;</span>: <span class=\"string\">&#x27;导演&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;actors&#x27;</span>: <span class=\"string\">&#x27;演员&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;rating&#x27;</span>: <span class=\"string\">&#x27;评分&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;language&#x27;</span>: <span class=\"string\">&#x27;语言&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;subtitles&#x27;</span>: <span class=\"string\">&#x27;字幕&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;duration&#x27;</span>: <span class=\"string\">&#x27;片长&#x27;</span></span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"modelspy\"><a class=\"anchor\" href=\"#modelspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL21vZGVscy5weQ==\">models.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> models</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Category</span>(models.Model):</span><br><span class=\"line\">    name = models.CharField(max_length=<span class=\"number\">100</span>, verbose_name=<span class=\"string\">&quot;分类名称&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__str__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.name</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Meta</span>:</span><br><span class=\"line\">        verbose_name = <span class=\"string\">&quot;电影分类&quot;</span></span><br><span class=\"line\">        verbose_name_plural = <span class=\"string\">&quot;电影分类&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Movie</span>(models.Model):</span><br><span class=\"line\">    title = models.CharField(max_length=<span class=\"number\">100</span>, verbose_name=<span class=\"string\">&quot;名称&quot;</span>)</span><br><span class=\"line\">    description = models.TextField(verbose_name=<span class=\"string\">&quot;简介&quot;</span>)</span><br><span class=\"line\">    release_date = models.DateField(verbose_name=<span class=\"string\">&quot;上映日期&quot;</span>)</span><br><span class=\"line\">    category = models.ForeignKey(Category, on_delete=models.CASCADE, verbose_name=<span class=\"string\">&quot;类别&quot;</span>)</span><br><span class=\"line\">    download_link = models.URLField(verbose_name=<span class=\"string\">&quot;下载链接&quot;</span>)</span><br><span class=\"line\">    poster_url = models.URLField(verbose_name=<span class=\"string\">&quot;海报图片地址&quot;</span>, blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    director = models.CharField(max_length=<span class=\"number\">100</span>, verbose_name=<span class=\"string\">&quot;导演&quot;</span>, blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    actors = models.TextField(verbose_name=<span class=\"string\">&quot;演员&quot;</span>, blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    rating = models.FloatField(verbose_name=<span class=\"string\">&quot;评分&quot;</span>, blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    language = models.CharField(max_length=<span class=\"number\">50</span>, verbose_name=<span class=\"string\">&quot;语言&quot;</span>, blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    subtitles = models.CharField(max_length=<span class=\"number\">50</span>, verbose_name=<span class=\"string\">&quot;字幕&quot;</span>, blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    duration = models.CharField(max_length=<span class=\"number\">50</span>, verbose_name=<span class=\"string\">&quot;片长&quot;</span>, blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    downloads = models.IntegerField(default=<span class=\"number\">0</span>)</span><br><span class=\"line\">    is_recommended = models.BooleanField(default=<span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__str__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.title</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Meta</span>:</span><br><span class=\"line\">        verbose_name = <span class=\"string\">&quot;电影&quot;</span></span><br><span class=\"line\">        verbose_name_plural = <span class=\"string\">&quot;电影&quot;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"serializerspy\"><a class=\"anchor\" href=\"#serializerspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3NlcmlhbGl6ZXJzLnB5\">serializers.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> rest_framework <span class=\"keyword\">import</span> serializers</span><br><span class=\"line\"><span class=\"keyword\">from</span> .models <span class=\"keyword\">import</span> Movie</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MovieSerializer</span>(serializers.ModelSerializer):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    电影序列化器，用于将电影模型实例转化为JSON格式</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Meta</span>:</span><br><span class=\"line\">        model = Movie</span><br><span class=\"line\">        fields = <span class=\"string\">&#x27;__all__&#x27;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"testspy\"><a class=\"anchor\" href=\"#testspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3Rlc3RzLnB5\">tests.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.test <span class=\"keyword\">import</span> TestCase</span><br><span class=\"line\"><span class=\"keyword\">from</span> .models <span class=\"keyword\">import</span> Category, Movie</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MovieModelTest</span>(<span class=\"title class_ inherited__\">TestCase</span>):</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">setUp</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.category = Category.objects.create(name=<span class=\"string\">&quot;动作&quot;</span>)</span><br><span class=\"line\">        self.movie = Movie.objects.create(</span><br><span class=\"line\">            title=<span class=\"string\">&quot;测试电影&quot;</span>,</span><br><span class=\"line\">            description=<span class=\"string\">&quot;这是一个测试电影&quot;</span>,</span><br><span class=\"line\">            release_date=<span class=\"string\">&quot;2023-01-01&quot;</span>,</span><br><span class=\"line\">            category=self.category,</span><br><span class=\"line\">            download_link=<span class=\"string\">&quot;http://example.com&quot;</span></span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">test_movie_creation</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">        测试电影创建</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        self.assertEqual(self.movie.title, <span class=\"string\">&quot;测试电影&quot;</span>)</span><br><span class=\"line\">        self.assertEqual(self.movie.category.name, <span class=\"string\">&quot;动作&quot;</span>)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"urlspy\"><a class=\"anchor\" href=\"#urlspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.urls <span class=\"keyword\">import</span> path</span><br><span class=\"line\"><span class=\"keyword\">from</span> . <span class=\"keyword\">import</span> views</span><br><span class=\"line\"><span class=\"keyword\">from</span> .views <span class=\"keyword\">import</span> admin_login</span><br><span class=\"line\"></span><br><span class=\"line\">urlpatterns = [</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;&#x27;</span>, views.index, name=<span class=\"string\">&#x27;index&#x27;</span>),</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;recommendations/&#x27;</span>, views.movie_recommendations, name=<span class=\"string\">&#x27;movie_recommendations&#x27;</span>),</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;download_rank/&#x27;</span>, views.download_rank, name=<span class=\"string\">&#x27;download_rank&#x27;</span>),</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;category/&lt;int:category_id&gt;/&#x27;</span>, views.category_list, name=<span class=\"string\">&#x27;category_list&#x27;</span>),</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;movie/&lt;int:movie_id&gt;/&#x27;</span>, views.movie_detail, name=<span class=\"string\">&#x27;movie_detail&#x27;</span>),</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;movie/new/&#x27;</span>, views.movie_detail, name=<span class=\"string\">&#x27;movie_new&#x27;</span>),  <span class=\"comment\"># 用于新增电影</span></span><br><span class=\"line\">    path(<span class=\"string\">&#x27;admin_login/&#x27;</span>, admin_login, name=<span class=\"string\">&#x27;admin_login&#x27;</span>),</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"viewspy\"><a class=\"anchor\" href=\"#viewspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3ZpZXdzLnB5\">views.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.shortcuts <span class=\"keyword\">import</span> render, get_object_or_404, redirect</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.contrib.auth <span class=\"keyword\">import</span> authenticate, login</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.http <span class=\"keyword\">import</span> HttpResponse</span><br><span class=\"line\"><span class=\"keyword\">from</span> .models <span class=\"keyword\">import</span> Category, Movie</span><br><span class=\"line\"><span class=\"keyword\">from</span> .forms <span class=\"keyword\">import</span> MovieForm</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">movie_detail</span>(<span class=\"params\">request, movie_id=<span class=\"literal\">None</span></span>):</span><br><span class=\"line\">    movie = get_object_or_404(Movie, <span class=\"built_in\">id</span>=movie_id)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render(request, <span class=\"string\">&#x27;movies/movie_detail.html&#x27;</span>, &#123;<span class=\"string\">&#x27;movie&#x27;</span>: movie&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">index</span>(<span class=\"params\">request</span>):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    首页视图，显示所有电影分类和推荐电影</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    categories = Category.objects.<span class=\"built_in\">all</span>()</span><br><span class=\"line\">    all_movies = <span class=\"built_in\">list</span>(Movie.objects.<span class=\"built_in\">all</span>())</span><br><span class=\"line\">    recommended_movies = Movie.objects.<span class=\"built_in\">filter</span>(is_recommended=<span class=\"literal\">True</span>)  <span class=\"comment\"># 选择推荐的电影</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render(request, <span class=\"string\">&#x27;movies/index.html&#x27;</span>, &#123;<span class=\"string\">&#x27;categories&#x27;</span>: categories, <span class=\"string\">&#x27;recommended_movies&#x27;</span>: recommended_movies&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">movie_recommendations</span>(<span class=\"params\">request</span>):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    电影推荐视图，显示推荐电影</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    recommended_movies = Movie.objects.<span class=\"built_in\">filter</span>(is_recommended=<span class=\"literal\">True</span>)  <span class=\"comment\"># 选择推荐的电影</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render(request, <span class=\"string\">&#x27;movies/recommendations.html&#x27;</span>, &#123;<span class=\"string\">&#x27;recommended_movies&#x27;</span>: recommended_movies&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">download_rank</span>(<span class=\"params\">request</span>):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    下载排行视图，显示下载排行前10的电影</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    top_downloaded_movies = Movie.objects.order_by(<span class=\"string\">&#x27;-downloads&#x27;</span>)[:<span class=\"number\">10</span>]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render(request, <span class=\"string\">&#x27;movies/download_rank.html&#x27;</span>, &#123;<span class=\"string\">&#x27;top_downloaded_movies&#x27;</span>: top_downloaded_movies&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">category_list</span>(<span class=\"params\">request, category_id</span>):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    分类列表视图，显示某一分类下的所有电影</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    category = get_object_or_404(Category, <span class=\"built_in\">id</span>=category_id)</span><br><span class=\"line\">    movies = Movie.objects.<span class=\"built_in\">filter</span>(category=category)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render(request, <span class=\"string\">&#x27;movies/category_list.html&#x27;</span>, &#123;<span class=\"string\">&#x27;category&#x27;</span>: category, <span class=\"string\">&#x27;movies&#x27;</span>: movies&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">admin_login</span>(<span class=\"params\">request</span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.method == <span class=\"string\">&#x27;POST&#x27;</span>:</span><br><span class=\"line\">        username = request.POST[<span class=\"string\">&#x27;username&#x27;</span>]</span><br><span class=\"line\">        password = request.POST[<span class=\"string\">&#x27;password&#x27;</span>]</span><br><span class=\"line\">        user = authenticate(request, username=username, password=password)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> user <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            login(request, user)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> redirect(<span class=\"string\">&#x27;/admin&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> HttpResponse(<span class=\"string\">&#x27;登录失败，用户名或密码错误&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render(request, <span class=\"string\">&#x27;login.html&#x27;</span>)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"migrations\"><a class=\"anchor\" href=\"#migrations\">#</a> /migrations</h3>\n<h4 id=\"0001_initialpy\"><a class=\"anchor\" href=\"#0001_initialpy\">#</a> 0001_initial.py</h4>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Generated by Django 5.0.6 on 2024-06-22 05:47</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> django.db.models.deletion</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> migrations, models</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Migration</span>(migrations.Migration):</span><br><span class=\"line\">    initial = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">    dependencies = []</span><br><span class=\"line\"></span><br><span class=\"line\">    operations = [</span><br><span class=\"line\">        migrations.CreateModel(</span><br><span class=\"line\">            name=<span class=\"string\">&quot;Category&quot;</span>,</span><br><span class=\"line\">            fields=[</span><br><span class=\"line\">                (</span><br><span class=\"line\">                    <span class=\"string\">&quot;id&quot;</span>,</span><br><span class=\"line\">                    models.BigAutoField(</span><br><span class=\"line\">                        auto_created=<span class=\"literal\">True</span>,</span><br><span class=\"line\">                        primary_key=<span class=\"literal\">True</span>,</span><br><span class=\"line\">                        serialize=<span class=\"literal\">False</span>,</span><br><span class=\"line\">                        verbose_name=<span class=\"string\">&quot;ID&quot;</span>,</span><br><span class=\"line\">                    ),</span><br><span class=\"line\">                ),</span><br><span class=\"line\">                (<span class=\"string\">&quot;name&quot;</span>, models.CharField(max_length=<span class=\"number\">100</span>, verbose_name=<span class=\"string\">&quot;分类名称&quot;</span>)),</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            options=&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;verbose_name&quot;</span>: <span class=\"string\">&quot;电影分类&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;verbose_name_plural&quot;</span>: <span class=\"string\">&quot;电影分类&quot;</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.CreateModel(</span><br><span class=\"line\">            name=<span class=\"string\">&quot;Movie&quot;</span>,</span><br><span class=\"line\">            fields=[</span><br><span class=\"line\">                (</span><br><span class=\"line\">                    <span class=\"string\">&quot;id&quot;</span>,</span><br><span class=\"line\">                    models.BigAutoField(</span><br><span class=\"line\">                        auto_created=<span class=\"literal\">True</span>,</span><br><span class=\"line\">                        primary_key=<span class=\"literal\">True</span>,</span><br><span class=\"line\">                        serialize=<span class=\"literal\">False</span>,</span><br><span class=\"line\">                        verbose_name=<span class=\"string\">&quot;ID&quot;</span>,</span><br><span class=\"line\">                    ),</span><br><span class=\"line\">                ),</span><br><span class=\"line\">                (<span class=\"string\">&quot;title&quot;</span>, models.CharField(max_length=<span class=\"number\">100</span>, verbose_name=<span class=\"string\">&quot;电影标题&quot;</span>)),</span><br><span class=\"line\">                (<span class=\"string\">&quot;description&quot;</span>, models.TextField(verbose_name=<span class=\"string\">&quot;电影描述&quot;</span>)),</span><br><span class=\"line\">                (<span class=\"string\">&quot;release_date&quot;</span>, models.DateField(verbose_name=<span class=\"string\">&quot;上映日期&quot;</span>)),</span><br><span class=\"line\">                (<span class=\"string\">&quot;download_link&quot;</span>, models.URLField(verbose_name=<span class=\"string\">&quot;下载链接&quot;</span>)),</span><br><span class=\"line\">                (</span><br><span class=\"line\">                    <span class=\"string\">&quot;category&quot;</span>,</span><br><span class=\"line\">                    models.ForeignKey(</span><br><span class=\"line\">                        on_delete=django.db.models.deletion.CASCADE,</span><br><span class=\"line\">                        to=<span class=\"string\">&quot;movies.category&quot;</span>,</span><br><span class=\"line\">                        verbose_name=<span class=\"string\">&quot;电影分类&quot;</span>,</span><br><span class=\"line\">                    ),</span><br><span class=\"line\">                ),</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            options=&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;verbose_name&quot;</span>: <span class=\"string\">&quot;电影&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;verbose_name_plural&quot;</span>: <span class=\"string\">&quot;电影&quot;</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">        ),</span><br><span class=\"line\">    ]</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"0002_movie_actors_movie_director_movie_duration_and_morepy\"><a class=\"anchor\" href=\"#0002_movie_actors_movie_director_movie_duration_and_morepy\">#</a> 0002_movie_actors_movie_director_movie_duration_and_more.py</h4>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Generated by Django 5.0.6 on 2024-06-22 07:07</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> django.db.models.deletion</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> migrations, models</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Migration</span>(migrations.Migration):</span><br><span class=\"line\">    dependencies = [</span><br><span class=\"line\">        (<span class=\"string\">&quot;movies&quot;</span>, <span class=\"string\">&quot;0001_initial&quot;</span>),</span><br><span class=\"line\">    ]</span><br><span class=\"line\"></span><br><span class=\"line\">    operations = [</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;actors&quot;</span>,</span><br><span class=\"line\">            field=models.TextField(blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;演员&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;director&quot;</span>,</span><br><span class=\"line\">            field=models.CharField(</span><br><span class=\"line\">                blank=<span class=\"literal\">True</span>, max_length=<span class=\"number\">100</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;导演&quot;</span></span><br><span class=\"line\">            ),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;duration&quot;</span>,</span><br><span class=\"line\">            field=models.CharField(</span><br><span class=\"line\">                blank=<span class=\"literal\">True</span>, max_length=<span class=\"number\">50</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;片长&quot;</span></span><br><span class=\"line\">            ),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;language&quot;</span>,</span><br><span class=\"line\">            field=models.CharField(</span><br><span class=\"line\">                blank=<span class=\"literal\">True</span>, max_length=<span class=\"number\">50</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;语言&quot;</span></span><br><span class=\"line\">            ),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;poster_url&quot;</span>,</span><br><span class=\"line\">            field=models.URLField(blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;海报图片地址&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;rating&quot;</span>,</span><br><span class=\"line\">            field=models.FloatField(blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;评分&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;subtitles&quot;</span>,</span><br><span class=\"line\">            field=models.CharField(</span><br><span class=\"line\">                blank=<span class=\"literal\">True</span>, max_length=<span class=\"number\">50</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;字幕&quot;</span></span><br><span class=\"line\">            ),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;category&quot;</span>,</span><br><span class=\"line\">            field=models.ForeignKey(</span><br><span class=\"line\">                on_delete=django.db.models.deletion.CASCADE,</span><br><span class=\"line\">                to=<span class=\"string\">&quot;movies.category&quot;</span>,</span><br><span class=\"line\">                verbose_name=<span class=\"string\">&quot;类别&quot;</span>,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;description&quot;</span>,</span><br><span class=\"line\">            field=models.TextField(verbose_name=<span class=\"string\">&quot;简介&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;title&quot;</span>,</span><br><span class=\"line\">            field=models.CharField(max_length=<span class=\"number\">100</span>, verbose_name=<span class=\"string\">&quot;名称&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">    ]</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"0003_movie_downloads_movie_is_recommended_and_morepy\"><a class=\"anchor\" href=\"#0003_movie_downloads_movie_is_recommended_and_morepy\">#</a> 0003_movie_downloads_movie_is_recommended_and_more.py</h4>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Generated by Django 5.0.6 on 2024-06-22 11:03</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> migrations, models</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Migration</span>(migrations.Migration):</span><br><span class=\"line\">    dependencies = [</span><br><span class=\"line\">        (<span class=\"string\">&quot;movies&quot;</span>, <span class=\"string\">&quot;0002_movie_actors_movie_director_movie_duration_and_more&quot;</span>),</span><br><span class=\"line\">    ]</span><br><span class=\"line\"></span><br><span class=\"line\">    operations = [</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;downloads&quot;</span>,</span><br><span class=\"line\">            field=models.IntegerField(default=<span class=\"number\">0</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AddField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;is_recommended&quot;</span>,</span><br><span class=\"line\">            field=models.BooleanField(default=<span class=\"literal\">False</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;description&quot;</span>,</span><br><span class=\"line\">            field=models.TextField(),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;poster_url&quot;</span>,</span><br><span class=\"line\">            field=models.URLField(),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;title&quot;</span>,</span><br><span class=\"line\">            field=models.CharField(max_length=<span class=\"number\">100</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">    ]</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"0004_alter_movie_description_alter_movie_poster_url_and_morepy\"><a class=\"anchor\" href=\"#0004_alter_movie_description_alter_movie_poster_url_and_morepy\">#</a> 0004_alter_movie_description_alter_movie_poster_url_and_more.py</h4>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Generated by Django 5.0.6 on 2024-06-22 13:08</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> migrations, models</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Migration</span>(migrations.Migration):</span><br><span class=\"line\">    dependencies = [</span><br><span class=\"line\">        (<span class=\"string\">&quot;movies&quot;</span>, <span class=\"string\">&quot;0003_movie_downloads_movie_is_recommended_and_more&quot;</span>),</span><br><span class=\"line\">    ]</span><br><span class=\"line\"></span><br><span class=\"line\">    operations = [</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;description&quot;</span>,</span><br><span class=\"line\">            field=models.TextField(verbose_name=<span class=\"string\">&quot;简介&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;poster_url&quot;</span>,</span><br><span class=\"line\">            field=models.URLField(blank=<span class=\"literal\">True</span>, null=<span class=\"literal\">True</span>, verbose_name=<span class=\"string\">&quot;海报图片地址&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        migrations.AlterField(</span><br><span class=\"line\">            model_name=<span class=\"string\">&quot;movie&quot;</span>,</span><br><span class=\"line\">            name=<span class=\"string\">&quot;title&quot;</span>,</span><br><span class=\"line\">            field=models.CharField(max_length=<span class=\"number\">100</span>, verbose_name=<span class=\"string\">&quot;名称&quot;</span>),</span><br><span class=\"line\">        ),</span><br><span class=\"line\">    ]</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"initpy-2\"><a class=\"anchor\" href=\"#initpy-2\">#</a> <strong>init</strong>.py</h4>\n<h3 id=\"templates\"><a class=\"anchor\" href=\"#templates\">#</a> /templates</h3>\n<h4 id=\"movies-2\"><a class=\"anchor\" href=\"#movies-2\">#</a> /movies</h4>\n<h5 id=\"basehtml\"><a class=\"anchor\" href=\"#basehtml\">#</a> base.html</h5>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;/static/beijing_2.png&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-size</span>: cover;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-repeat</span>: no-repeat;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-family</span>: <span class=\"string\">&#x27;Arial&#x27;</span>, sans-serif;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.movie-title</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-family</span>: <span class=\"string\">&#x27;KaiTi&#x27;</span>, cursive;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: <span class=\"number\">#32C5E9</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">2em</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.movie-rating</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">1.5em</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.movie-rating-green</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: green;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.movie-rating-black</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: black;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.navbar-brand</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">4em</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: black;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: pink;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin-top</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.nav-link</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">2em</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: black <span class=\"meta\">!important</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span> <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.nav-home</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: lightblue;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.nav-recommendations</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: lightgreen;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.nav-download</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: lightcoral;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.nav-admin</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: lightyellow;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.category-link</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">2em</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: black <span class=\"meta\">!important</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span> <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.nav-container</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">justify-content</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">flex-wrap</span>: wrap;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.category-china</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: lightblue;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.category-japan-korea</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: lightgreen;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.category-europe-america</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: lightcoral;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>电影网站<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    &#123;% load static %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% static &#x27;css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% static &#x27;css/style.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">header</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar navbar-expand-lg navbar-dark bg-dark&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar-brand&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;index&#x27; %&#125;&quot;</span>&gt;</span>电影网站<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-container&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-link nav-home&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;index&#x27; %&#125;&quot;</span>&gt;</span>首页<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-link nav-recommendations&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;movie_recommendations&#x27; %&#125;&quot;</span>&gt;</span>电影推荐<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-link nav-download&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;download_rank&#x27; %&#125;&quot;</span>&gt;</span>下载排行<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-link nav-admin&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/admin&quot;</span>&gt;</span>管理员入口<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">main</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container mt-4 content-wrapper&quot;</span>&gt;</span></span><br><span class=\"line\">        &#123;% block content %&#125;</span><br><span class=\"line\">        &#123;% endblock %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">footer</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bg-dark text-white text-center py-3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"symbol\">&amp;copy;</span> 2024 电影网站——made by Enjun Du<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;% static &#x27;js/jquery.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;% static &#x27;js/bootstrap.bundle.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;% static &#x27;js/main.js&#x27; %&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h5 id=\"category_listhtml\"><a class=\"anchor\" href=\"#category_listhtml\">#</a> category_list.html</h5>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;movies/base.html&#x27; %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>&#123;&#123; category.name &#125;&#125;电影列表<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span></span><br><span class=\"line\">    &#123;% for movie in movies %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-3&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card mb-3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; movie.poster_url &#125;&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-img-top&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&#123;&#123; movie.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">h5</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-title&quot;</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-text&quot;</span>&gt;</span>&#123;&#123; movie.rating &#125;&#125; / 10<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;movie_detail&#x27; movie.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>详情<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"download_rankhtml\"><a class=\"anchor\" href=\"#download_rankhtml\">#</a> download_rank.html</h5>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;movies/base.html&#x27; %&#125;</span><br><span class=\"line\">&#123;% load static %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mt-5&quot;</span>&gt;</span>下载排行<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span></span><br><span class=\"line\">    &#123;% for movie in top_downloaded_movies %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-3&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card mb-3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; movie.poster_url &#125;&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-img-top&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&#123;&#123; movie.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">h5</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-title&quot;</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-text&quot;</span>&gt;</span>&#123;&#123; movie.description|truncatewords:10 &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-text&quot;</span>&gt;</span>下载次数: &#123;&#123; movie.downloads &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;movie_detail&#x27; movie.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>详情<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"indexhtml\"><a class=\"anchor\" href=\"#indexhtml\">#</a> index.html</h5>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;movies/base.html&#x27; %&#125;</span><br><span class=\"line\">&#123;% load static %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-center&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;font-size: 2em;&quot;</span>&gt;</span>电影分类<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;d-flex justify-content-center mb-4&quot;</span>&gt;</span></span><br><span class=\"line\">    &#123;% for category in categories %&#125;</span><br><span class=\"line\">        &#123;% if category.name == &#x27;国内电影&#x27; %&#125;</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;category_list&#x27; category.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;category-link category-china&quot;</span>&gt;</span>&#123;&#123; category.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        &#123;% elif category.name == &#x27;日韩电影&#x27; %&#125;</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;category_list&#x27; category.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;category-link category-japan-korea&quot;</span>&gt;</span>&#123;&#123; category.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        &#123;% elif category.name == &#x27;欧美电影&#x27; %&#125;</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;category_list&#x27; category.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;category-link category-europe-america&quot;</span>&gt;</span>&#123;&#123; category.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        &#123;% else %&#125;</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;category_list&#x27; category.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;category-link&quot;</span>&gt;</span>&#123;&#123; category.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        &#123;% endif %&#125;</span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;carouselExampleIndicators&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel slide&quot;</span> <span class=\"attr\">data-ride</span>=<span class=\"string\">&quot;carousel&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel-inner&quot;</span>&gt;</span></span><br><span class=\"line\">        &#123;% for movie in recommended_movies|slice:&quot;:4&quot; %&#125;</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel-item &#123;% if forloop.first %&#125;active&#123;% endif %&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;d-block w-100&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; movie.poster_url &#125;&#125;&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&#123;&#123; movie.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel-caption d-none d-md-block&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">h5</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-title&quot;</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        &#123;% endfor %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel-control-prev&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#carouselExampleIndicators&quot;</span> <span class=\"attr\">role</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">data-slide</span>=<span class=\"string\">&quot;prev&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel-control-prev-icon&quot;</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;sr-only&quot;</span>&gt;</span>Previous<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel-control-next&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#carouselExampleIndicators&quot;</span> <span class=\"attr\">role</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">data-slide</span>=<span class=\"string\">&quot;next&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;carousel-control-next-icon&quot;</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;sr-only&quot;</span>&gt;</span>Next<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mt-5 text-center&quot;</span>&gt;</span>推荐电影<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row justify-content-center&quot;</span>&gt;</span></span><br><span class=\"line\">    &#123;% for movie in recommended_movies|slice:&quot;4:&quot; %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-3&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card mb-3 text-center&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; movie.poster_url &#125;&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-img-top mx-auto d-block&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&#123;&#123; movie.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">h5</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-title movie-title&quot;</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating-green&quot;</span>&gt;</span>&#123;&#123; movie.rating|floatformat:1|stringformat:&quot;d&quot; &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>/<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating-black&quot;</span>&gt;</span>&#123;&#123; movie.rating|add:&quot;1&quot;|floatformat:1|stringformat:&quot;d&quot; &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;movie_detail&#x27; movie.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>详情<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"movie_detailhtml\"><a class=\"anchor\" href=\"#movie_detailhtml\">#</a> movie_detail.html</h5>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;movies/base.html&#x27; %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row justify-content-center&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-4 text-center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; movie.poster_url &#125;&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;img-fluid mx-auto d-block&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&#123;&#123; movie.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-8 text-center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-title&quot;</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating-green&quot;</span>&gt;</span>&#123;&#123; movie.rating|floatformat:1|stringformat:&quot;d&quot; &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>/<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating-black&quot;</span>&gt;</span>&#123;&#123; movie.rating|add:&quot;1&quot;|floatformat:&quot;d&quot; &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>上映日期:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.release_date &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>类别:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.category.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>导演:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.director &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>演员:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.actors &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>语言:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.language &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>字幕:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.subtitles &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>片长:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.duration &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>简介:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.description &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; movie.download_link &#125;&#125;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                   <span class=\"attr\">style</span>=<span class=\"string\">&quot;display: inline-block;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          font-size: 3em;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          color: blue;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          background-color: lavender;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          padding: 20px;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          border: 2px solid purple;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          border-radius: 5px;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          text-decoration: none;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                          transition: background-color 0.3s ease;&quot;</span>&gt;</span></span><br><span class=\"line\">                    下载电影</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;a&#x27;</span>).<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">this</span>.<span class=\"property\">style</span>.<span class=\"property\">backgroundColor</span> = <span class=\"string\">&#x27;lightcoral&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<p>#####recommendations.html</p>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;movies/base.html&#x27; %&#125;</span><br><span class=\"line\">&#123;% load static %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mt-5&quot;</span>&gt;</span>电影推荐<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span></span><br><span class=\"line\">    &#123;% for movie in recommended_movies %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-3&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card mb-3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; movie.poster_url &#125;&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-img-top&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&#123;&#123; movie.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">h5</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-title&quot;</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-text&quot;</span>&gt;</span>&#123;&#123; movie.description|truncatewords:10 &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;movie_detail&#x27; movie.id %&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>详情<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"static\"><a class=\"anchor\" href=\"#static\">#</a> /static</h4>\n<h5 id=\"css\"><a class=\"anchor\" href=\"#css\">#</a> /css</h5>\n<h5 id=\"images\"><a class=\"anchor\" href=\"#images\">#</a> /images</h5>\n<h5 id=\"js\"><a class=\"anchor\" href=\"#js\">#</a> /js</h5>\n<h2 id=\"my_movie_site\"><a class=\"anchor\" href=\"#my_movie_site\">#</a> /my_movie_site</h2>\n<h3 id=\"initpy-3\"><a class=\"anchor\" href=\"#initpy-3\">#</a> <strong>init</strong>.py</h3>\n<h3 id=\"settingspy\"><a class=\"anchor\" href=\"#settingspy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">Django settings for my_movie_site project.</span></span><br><span class=\"line\"><span class=\"string\">Generated by &#x27;django-admin startproject&#x27; using Django 3.2.</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> pathlib <span class=\"keyword\">import</span> Path</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Build paths inside the project like this: BASE_DIR / &#x27;subdir&#x27;.</span></span><br><span class=\"line\">BASE_DIR = Path(__file__).resolve().parent.parent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># SECURITY WARNING: keep the secret key used in production secret!</span></span><br><span class=\"line\">SECRET_KEY = <span class=\"string\">&#x27;your-secret-key&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># SECURITY WARNING: don&#x27;t run with debug turned on in production!</span></span><br><span class=\"line\">DEBUG = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">ALLOWED_HOSTS = []</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Application definition</span></span><br><span class=\"line\">INSTALLED_APPS = [</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;movies&#x27;</span>,  <span class=\"comment\"># 注册movies应用</span></span><br><span class=\"line\">    <span class=\"string\">&#x27;rest_framework&#x27;</span>,  <span class=\"comment\"># 注册DRF</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\">MIDDLEWARE = [</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\">ROOT_URLCONF = <span class=\"string\">&#x27;my_movie_site.urls&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">TEMPLATES = [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;BACKEND&#x27;</span>: <span class=\"string\">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;DIRS&#x27;</span>: [BASE_DIR / <span class=\"string\">&#x27;templates&#x27;</span>],</span><br><span class=\"line\">        <span class=\"string\">&#x27;APP_DIRS&#x27;</span>: <span class=\"literal\">True</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;context_processors&#x27;</span>: [</span><br><span class=\"line\">                <span class=\"string\">&#x27;django.template.context_processors.debug&#x27;</span>,</span><br><span class=\"line\">                <span class=\"string\">&#x27;django.template.context_processors.request&#x27;</span>,</span><br><span class=\"line\">                <span class=\"string\">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,</span><br><span class=\"line\">                <span class=\"string\">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,</span><br><span class=\"line\">            ],</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\">WSGI_APPLICATION = <span class=\"string\">&#x27;my_movie_site.wsgi.application&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Database</span></span><br><span class=\"line\"><span class=\"comment\"># https://docs.djangoproject.com/en/3.2/ref/settings/#databases</span></span><br><span class=\"line\"></span><br><span class=\"line\">DATABASES = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;default&#x27;</span>: &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;ENGINE&#x27;</span>: <span class=\"string\">&#x27;django.db.backends.sqlite3&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;NAME&#x27;</span>: BASE_DIR / <span class=\"string\">&#x27;db.sqlite3&#x27;</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Password validation</span></span><br><span class=\"line\"><span class=\"comment\"># https://docs.djangoproject.com/en/3.2/ref/settings/#auth-password-validators</span></span><br><span class=\"line\"></span><br><span class=\"line\">AUTH_PASSWORD_VALIDATORS = [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;NAME&#x27;</span>: <span class=\"string\">&#x27;django.contrib.auth.password_validation.UserAttributeSimilarityValidator&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;NAME&#x27;</span>: <span class=\"string\">&#x27;django.contrib.auth.password_validation.MinimumLengthValidator&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;NAME&#x27;</span>: <span class=\"string\">&#x27;django.contrib.auth.password_validation.CommonPasswordValidator&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;NAME&#x27;</span>: <span class=\"string\">&#x27;django.contrib.auth.password_validation.NumericPasswordValidator&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Internationalization</span></span><br><span class=\"line\"><span class=\"comment\"># https://docs.djangoproject.com/en/3.2/topics/i18n/</span></span><br><span class=\"line\"></span><br><span class=\"line\">LANGUAGE_CODE = <span class=\"string\">&#x27;zh-hans&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">TIME_ZONE = <span class=\"string\">&#x27;Asia/Shanghai&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">USE_I18N = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">USE_L10N = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">USE_TZ = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Static files (CSS, JavaScript, Images)</span></span><br><span class=\"line\"><span class=\"comment\"># https://docs.djangoproject.com/en/3.2/howto/static-files/</span></span><br><span class=\"line\"></span><br><span class=\"line\">STATIC_URL = <span class=\"string\">&#x27;/static/&#x27;</span></span><br><span class=\"line\">STATICFILES_DIRS = [os.path.join(BASE_DIR, <span class=\"string\">&#x27;static&#x27;</span>)]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Default primary key field type</span></span><br><span class=\"line\"><span class=\"comment\"># https://docs.djangoproject.com/en/3.2/ref/settings/#default-auto-field</span></span><br><span class=\"line\"></span><br><span class=\"line\">DEFAULT_AUTO_FIELD = <span class=\"string\">&#x27;django.db.models.BigAutoField&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 媒体文件设置</span></span><br><span class=\"line\">MEDIA_URL = <span class=\"string\">&#x27;/media/&#x27;</span></span><br><span class=\"line\">MEDIA_ROOT = BASE_DIR / <span class=\"string\">&#x27;media&#x27;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"urlspy-2\"><a class=\"anchor\" href=\"#urlspy-2\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> django.contrib <span class=\"keyword\">import</span> admin</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.urls <span class=\"keyword\">import</span> path, include</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.conf <span class=\"keyword\">import</span> settings</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.conf.urls.static <span class=\"keyword\">import</span> static</span><br><span class=\"line\"></span><br><span class=\"line\">urlpatterns = [</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class=\"line\">    path(<span class=\"string\">&#x27;&#x27;</span>, include(<span class=\"string\">&#x27;movies.urls&#x27;</span>)),  <span class=\"comment\"># 包含movies应用的URL</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> settings.DEBUG:</span><br><span class=\"line\">    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"wsgipy\"><a class=\"anchor\" href=\"#wsgipy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3dzZ2kucHk=\">wsgi.py</span></h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">WSGI config for my_movie_site project.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">It exposes the WSGI callable as a module-level variable named ``application``.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">For more information on this file, see</span></span><br><span class=\"line\"><span class=\"string\">https://docs.djangoproject.com/en/3.2/howto/deployment/wsgi/</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> django.core.wsgi <span class=\"keyword\">import</span> get_wsgi_application</span><br><span class=\"line\"></span><br><span class=\"line\">os.environ.setdefault(<span class=\"string\">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>, <span class=\"string\">&#x27;my_movie_site.settings&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">application = get_wsgi_application()</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"static-2\"><a class=\"anchor\" href=\"#static-2\">#</a> static</h2>\n<h3 id=\"beijingpng\"><a class=\"anchor\" href=\"#beijingpng\">#</a> beijing.png</h3>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/EDmIaj6UHxV3uAC.png\" alt=\"QQ_1720458218392.png\" /></p>\n<h3 id=\"beijing_2png\"><a class=\"anchor\" href=\"#beijing_2png\">#</a> beijing_2.png</h3>\n<p><img data-src=\"https://s2.loli.net/2024/07/09/B2yCMhPQUi7xukV.jpg\" alt=\"beijing_2.png\" /></p>\n<h2 id=\"templates-2\"><a class=\"anchor\" href=\"#templates-2\">#</a> /templates</h2>\n<h3 id=\"admin\"><a class=\"anchor\" href=\"#admin\">#</a> /admin</h3>\n<h4 id=\"dashboardhtml\"><a class=\"anchor\" href=\"#dashboardhtml\">#</a> dashboard.html</h4>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;admin/base.html&#x27; %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>后台管理主页<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;admin:movies_movie_changelist&#x27; %&#125;&quot;</span>&gt;</span>电影管理<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;admin:movies_category_changelist&#x27; %&#125;&quot;</span>&gt;</span>分类管理<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"loginhtml\"><a class=\"anchor\" href=\"#loginhtml\">#</a> login.html</h4>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>管理员登录<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">font-family</span>: <span class=\"string\">&#x27;Arial&#x27;</span>, sans-serif;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: <span class=\"number\">#f4f4f4</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">flex-direction</span>: column;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">align-items</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">justify-content</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">height</span>: <span class=\"number\">100vh</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;/static/beijing.png&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-size</span>: cover;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-repeat</span>: no-repeat;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: <span class=\"number\">#4682B4</span>; <span class=\"comment\">/* 钢蓝色 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">form</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">max-width</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background</span>: <span class=\"number\">#fff</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.1</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">input</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">box-sizing</span>: border-box;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border-radius</span>: <span class=\"number\">4px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=<span class=\"string\">&quot;submit&quot;</span>]</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: <span class=\"number\">#4682B4</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">color</span>: white;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">cursor</span>: pointer;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=<span class=\"string\">&quot;submit&quot;</span>]</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: <span class=\"number\">#4169E1</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>管理员登录<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post&quot;</span>&gt;</span></span><br><span class=\"line\">        &#123;% csrf_token %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;username&quot;</span>&gt;</span>用户名:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">required</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span>密码:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">required</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;登录&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"movie_detailhtml-2\"><a class=\"anchor\" href=\"#movie_detailhtml-2\">#</a> movie_detail.html</h4>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;movies/base.html&#x27; %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row justify-content-center&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-4 text-center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; movie.poster_url &#125;&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;img-fluid mx-auto d-block&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&#123;&#123; movie.title &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-md-8 text-center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-title&quot;</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating-green&quot;</span>&gt;</span>&#123;&#123; movie.rating|floatformat:1|stringformat:&quot;d&quot; &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>/<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;movie-rating-black&quot;</span>&gt;</span>&#123;&#123; movie.rating|add:&quot;1&quot;|floatformat:1|stringformat:&quot;d&quot; &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>上映日期:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.release_date &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>类别:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.category.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>导演:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.director &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>演员:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.actors &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>语言:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.language &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>字幕:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.subtitles &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>片长:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.duration &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>简介:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; movie.description &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; movie.download_link &#125;&#125;&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>下载电影<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"movie_listhtml\"><a class=\"anchor\" href=\"#movie_listhtml\">#</a> movie_list.html</h4>\n<p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#x27;admin/base.html&#x27; %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% block content %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>电影列表<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>标题<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>分类<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>上映日期<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>操作<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">        &#123;% for movie in movies %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; movie.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; movie.category.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; movie.release_date &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;admin:movies_movie_change&#x27; movie.id %&#125;&quot;</span>&gt;</span>编辑<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;admin:movies_movie_delete&#x27; movie.id %&#125;&quot;</span>&gt;</span>删除<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        &#123;% endfor %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"dbsqlite3\"><a class=\"anchor\" href=\"#dbsqlite3\">#</a> db.sqlite3</h2>\n<p>生成的数据库</p>\n<h2 id=\"managepy\"><a class=\"anchor\" href=\"#managepy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL21hbmFnZS5weQ==\">manage.py</span></h2>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;Django&#x27;s command-line utility for administrative tasks.&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main</span>():</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;Run administrative tasks.&quot;&quot;&quot;</span></span><br><span class=\"line\">    os.environ.setdefault(<span class=\"string\">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>, <span class=\"string\">&#x27;my_movie_site.settings&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">from</span> django.core.management <span class=\"keyword\">import</span> execute_from_command_line</span><br><span class=\"line\">    <span class=\"keyword\">except</span> ImportError <span class=\"keyword\">as</span> exc:</span><br><span class=\"line\">        <span class=\"keyword\">raise</span> ImportError(</span><br><span class=\"line\">            <span class=\"string\">&quot;Couldn&#x27;t import Django. Are you sure it&#x27;s installed and &quot;</span></span><br><span class=\"line\">            <span class=\"string\">&quot;available on your PYTHONPATH environment variable? Did you &quot;</span></span><br><span class=\"line\">            <span class=\"string\">&quot;forget to activate a virtual environment?&quot;</span></span><br><span class=\"line\">        ) <span class=\"keyword\">from</span> exc</span><br><span class=\"line\">    execute_from_command_line(sys.argv)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"requirements\"><a class=\"anchor\" href=\"#requirements\">#</a> requirements</h2>\n<p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Django==5.0.6</span><br><span class=\"line\">djangorestframework==3.15.2</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"over\"><a class=\"anchor\" href=\"#over\">#</a> Over</h2>\n",
            "tags": [
                "Hexo",
                "Front Matter"
            ]
        },
        {
            "id": "https://enjundu.github.io/ECEBC/redis-dict.c%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/",
            "url": "https://enjundu.github.io/ECEBC/redis-dict.c%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/",
            "title": "DICT.C源码阅读报告",
            "date_published": "2024-07-02T17:43:21.000Z",
            "content_html": "<h1 id=\"一-各函数分部解析\"><a class=\"anchor\" href=\"#一-各函数分部解析\">#</a> 一、各函数分部解析</h1>\n<ul>\n<li>\n<p>struct dictEntry 结构体：</p>\n<ol>\n<li>用于表示字典中的键值对。</li>\n<li>成员变量：</li>\n<li>void *key：键的指针。</li>\n<li>union：联合体，可以存储值的不同类型（void *val, uint64_t u64, int64_t s64, double d）。</li>\n<li>struct dictEntry *next：指向下一个相同哈希槽中的 entry 的指针。</li>\n</ol>\n</li>\n<li>\n<p>typedef struct dictEntryNoValue 结构体：</p>\n<ol>\n<li>表示字典中的无值 entry。</li>\n<li>成员变量：\n<ol>\n<li>void *key：键的指针。</li>\n<li>dictEntry *next：指向下一个相同哈希槽中的 entry 的指针。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>static dictResizeEnable dict_can_resize：</p>\n<ol>\n<li>\n<ul>\n<li>全局变量，表示字典是否允许进行大小调整的标志。</li>\n</ul>\n</li>\n</ol>\n</li>\n<li>\n<p>static unsigned int dict_force_resize_ratio：</p>\n<ol>\n<li>全局变量，表示强制调整大小的比例阈值。</li>\n</ol>\n</li>\n<li>\n<p>哈希函数相关：</p>\n<ol>\n<li>static uint8_t dict_hash_function_seed [16]：字典哈希函数的种子。</li>\n<li>void dictSetHashFunctionSeed (uint8_t *seed)：设置哈希函数的种子。</li>\n<li>uint8_t *dictGetHashFunctionSeed (void)：获取哈希函数的种子。</li>\n<li>uint64_t dictGenHashFunction (const void *key, size_t len)：字典使用的哈希函数。</li>\n<li>uint64_t dictGenCaseHashFunction (const unsigned char *buf, size_t len)：字典使用的哈希函数，不区分大小写。</li>\n</ol>\n</li>\n<li>\n<p>字典指针位操作相关：</p>\n<ol>\n<li>#define ENTRY_PTR_MASK 7：用于掩码操作的位掩码，表示字典指针的最低 3 位。</li>\n<li>#define ENTRY_PTR_NORMAL 0 和 #define ENTRY_PTR_NO_VALUE 2：表示不同类型的字典 entry。</li>\n<li>一系列辅助函数用于判断和操作不同类型的 entry。</li>\n</ol>\n</li>\n<li>\n<p>哈希表相关函数：</p>\n<ol>\n<li>_dictExpandIfNeeded (dict *d)：如果需要，扩展字典的哈希表大小的内部函数。</li>\n<li>_dictNextExp (unsigned long size)：返回大于等于给定大小的最小的 2 的整数次幂的对数的函数。</li>\n<li>_dictInit (dict *d, dictType *type)：初始化字典的内部函数。</li>\n</ol>\n</li>\n<li>\n<p>API 实现相关：</p>\n<ol>\n<li>_dictReset (dict *d, int htidx)：重置已使用 _dictInit () 初始化的哈希表参数。</li>\n<li>dictCreate (dictType *type)：创建一个新的哈希表。</li>\n<li>dictCreateMultiple (dictType *type, int count)：创建包含多个字典的数组。</li>\n<li>int _dictInit (dict *d, dictType *type)：初始化哈希表。</li>\n<li>int dictResize (dict *d)：调整表的大小，使其包含所有元素，且满足 USED/BUCKETS 比率接近 &lt;= 1 的不变式。</li>\n</ol>\n</li>\n<li>\n<p>int _dictExpand(dict *d, unsigned long size, int *malloc_failed)：</p>\n<ol>\n<li>这个函数用于扩展或创建哈希表，增加或初始化新的哈希表。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>size：新的哈希表大小。</li>\n<li>malloc_failed：如果为非空指针，则在分配内存失败时设置为 1。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>如果执行成功，返回 DICT_OK；否则返回 DICT_ERR。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>int dictExpand(dict *d, unsigned long size)：</p>\n<ol>\n<li>对外部接口的封装，用于扩展字典的哈希表。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>size：新的哈希表大小。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>如果执行成功，返回 DICT_OK；否则返回 DICT_ERR。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>int dictTryExpand(dict *d, unsigned long size)：</p>\n<ol>\n<li>对外部接口的封装，用于尝试扩展字典的哈希表，当内存分配失败时返回 DICT_ERR。\n<ol>\n<li>参数：</li>\n<li>d：字典。</li>\n<li>size：新的哈希表大小。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>如果内存分配失败，返回 DICT_ERR；否则返回 DICT_OK。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>int dictRehash(dict *d, int n)：</p>\n<ol>\n<li>执行 N 步的增量重新哈希。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>n：步数。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>如果还有从旧哈希表移动到新哈希表的键，则返回 1；否则返回 0。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>long long timeInMilliseconds(void)：</p>\n<ol>\n<li>返回当前时间戳，以毫秒为单位。</li>\n</ol>\n</li>\n<li>\n<p>int dictRehashMilliseconds(dict *d, unsigned int ms)：</p>\n<ol>\n<li>在指定的时间内（毫秒为单位）执行重新哈希。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>ms：指定的时间（毫秒）。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>返回实际进行的重新哈希步数。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>void _dictRehashStep(dict *d)：</p>\n<ol>\n<li>执行一步的增量重新哈希，仅在哈希表的重新哈希未暂停时执行。</li>\n</ol>\n</li>\n<li>\n<p>int dictAdd(dict *d, void *key, void *val)：</p>\n<ol>\n<li>向字典中添加键值对。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>key：键。</li>\n<li>val：值。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>如果成功，返回 DICT_OK；否则返回 DICT_ERR。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictAddRaw(dict *d, void *key, dictEntry **existing)：</p>\n<ol>\n<li>低级别的添加或查找函数，返回一个指向新键的 dictEntry 结构体。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>key：键。</li>\n<li>existing：如果键已经存在，则存储现有条目的指针。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>如果键已经存在，返回 NULL；否则返回指向新键的 dictEntry 结构体。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictInsertAtPosition(dict *d, void *key, void *position)：</p>\n<ol>\n<li>在指定位置插入键，该位置通常由 dictFindPositionForInsert 函数返回。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>key：键。</li>\n<li>position：插入位置。</li>\n</ol>\n</li>\n<li>返回值：\n<ol>\n<li>返回指向新键的 dictEntry 结构体。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>int dictReplace(dict *d, void *key, void *val)：</p>\n<ol>\n<li>尝试向字典中添加一个元素。如果键不存在，dictAddRaw 将成功。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>key：要添加或替换的键。</li>\n<li>val：要设置的值。</li>\n</ol>\n</li>\n<li>返回：\n<ol>\n<li>如果添加成功，返回 1；否则，如果键已存在，则返回 0。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictAddOrFind(dict *d, void *key)：</p>\n<ol>\n<li>是 dictAddRaw 的一个版本，始终返回指定键的哈希条目，即使键已存在且无法添加。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>key：要添加或查找的键。</li>\n</ol>\n</li>\n<li>返回：\n<ol>\n<li>如果添加成功，返回新的字典条目；如果键已存在，返回已存在的字典条目。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>static dictEntry *dictGenericDelete(dict *d, const void *key, int nofree)：</p>\n<ol>\n<li>用于在字典中搜索并删除元素。这是 dictDelete () 和 dictUnlink () 的辅助函数。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>key：要删除的键。</li>\n<li>nofree：指示是否释放内存的标志。</li>\n</ol>\n</li>\n<li>返回：\n<ol>\n<li>如果找到并删除元素，返回被删除的字典条目；如果未找到，返回 NULL。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>int dictDelete(dict *ht, const void *key)：</p>\n<ol>\n<li>从字典中删除元素，成功返回 DICT_OK，否则返回 DICT_ERR。</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictUnlink(dict *d, const void *key)：</p>\n<ol>\n<li>从字典中删除元素，但不实际释放键、值和字典条目。返回被找到并从表中解链的字典条目。</li>\n</ol>\n</li>\n<li>\n<p>void dictFreeUnlinkedEntry(dict *d, dictEntry *he)：</p>\n<ol>\n<li>用于真正释放调用 dictUnlink () 后的字典条目。</li>\n</ol>\n</li>\n<li>\n<p>int _dictClear(dict <em>d, int htidx, void(callback)(dict</em>))：</p>\n<ol>\n<li>释放字典中的所有元素。</li>\n<li>参数：\n<ol>\n<li>d：字典。</li>\n<li>htidx：要清除的哈希表索引。</li>\n<li>callback：可选的回调函数。</li>\n</ol>\n</li>\n<li>返回：\n<ol>\n<li>成功返回 DICT_OK。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>void dictRelease(dict *d)：</p>\n<ol>\n<li>清空并释放哈希表。首先通过 _dictClear 清空两个哈希表，然后释放字典结构体占用的内存。</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictFind(dict *d, const void *key)：</p>\n<ol>\n<li>在字典中查找给定键对应的字典条目。</li>\n<li>如果字典为空，返回 NULL。</li>\n<li>如果字典正在进行 rehash，执行一步 rehash 操作。</li>\n<li>遍历两个哈希表，查找匹配的键，找到则返回对应的字典条目。</li>\n</ol>\n</li>\n<li>\n<p>void *dictFetchValue(dict *d, const void *key)：</p>\n<ol>\n<li>获取字典中给定键对应的值。</li>\n<li>调用 dictFind 查找字典条目，如果找到则返回对应的值，否则返回 NULL。</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictTwoPhaseUnlinkFind(dict *d, const void *key, dictEntry ***plink, int *table_index)：</p>\n<ol>\n<li>在字典中查找给定键对应的字典条目，并获取该条目的前一项的指针地址（plink）和哈希表索引（table_index）。</li>\n<li>这是一种两阶段解链的操作，用于在可能的 rehash 过程中执行解链。</li>\n</ol>\n</li>\n<li>\n<p>void dictTwoPhaseUnlinkFree(dict *d, dictEntry *he, dictEntry **plink, int table_index)：</p>\n<ol>\n<li>两阶段解链并释放字典条目的函数。</li>\n<li>通过修改前一项的指针实现解链，然后释放键、值和字典条目的内存。</li>\n<li>恢复 rehash 过程。</li>\n</ol>\n</li>\n<li>\n<p>一系列用于设置和获取字典条目键值的辅助函数：</p>\n<ol>\n<li>dictSetKey、dictSetVal、dictSetSignedIntegerVal、dictSetUnsignedIntegerVal、dictSetDoubleVal 用于设置字典条目的键和值。</li>\n<li>dictIncrSignedIntegerVal、dictIncrUnsignedIntegerVal、dictIncrDoubleVal 用于自增字典条目的整数值和浮点数值。</li>\n<li>dictGetKey、dictGetVal、dictGetSignedIntegerVal、dictGetUnsignedIntegerVal、dictGetDoubleVal 用于获取字典条目的键和值。</li>\n</ol>\n</li>\n<li>\n<p>static dictEntry *dictGetNext(const dictEntry *de)：</p>\n<ol>\n<li>返回字典条目的 next 字段或 NULL，如果条目没有 next 字段则返回 NULL。</li>\n</ol>\n</li>\n<li>\n<p>static dictEntry **dictGetNextRef(dictEntry *de)：</p>\n</li>\n</ul>\n<ol>\n<li>返回指向字典条目的 next 字段的指针，或 NULL，如果条目没有 next 字段则返回 NULL。</li>\n</ol>\n<ul>\n<li>\n<p>static void dictSetNext(dictEntry *de, dictEntry *next)：</p>\n<ol>\n<li>设置字典条目的 next 字段。</li>\n</ol>\n</li>\n<li>\n<p>size_t dictMemUsage(const dict *d)：</p>\n<ol>\n<li>返回字典的内存使用，不包括键和值的大小。</li>\n</ol>\n</li>\n<li>\n<p>size_t dictEntryMemUsage(void)：</p>\n<ol>\n<li>返回字典条目的内存使用。</li>\n</ol>\n</li>\n<li>\n<p>unsigned long long dictFingerprint(dict *d)：</p>\n<ol>\n<li>生成字典的指纹，用于检测在迭代期间是否对字典进行了禁止的操作。</li>\n</ol>\n</li>\n<li>\n<p>void dictInitIterator(dictIterator *iter, dict *d)：</p>\n<ol>\n<li>初始化字典迭代器。</li>\n</ol>\n</li>\n<li>\n<p>void dictInitSafeIterator(dictIterator *iter, dict *d)：</p>\n</li>\n</ul>\n<ol>\n<li>初始化安全字典迭代器，用于在迭代过程中可能进行 rehash 操作的情况。</li>\n</ol>\n<ul>\n<li>\n<p>void dictResetIterator(dictIterator *iter)：</p>\n<ol>\n<li>重置字典迭代器。</li>\n</ol>\n</li>\n<li>\n<p>dictIterator *dictGetIterator(dict *d)：</p>\n<ol>\n<li>获取普通字典迭代器。</li>\n</ol>\n</li>\n<li>\n<p>dictIterator *dictGetSafeIterator(dict *d)：</p>\n</li>\n</ul>\n<ol>\n<li>获取安全字典迭代器，用于在迭代过程中可能进行 rehash 操作的情况。</li>\n</ol>\n<ul>\n<li>\n<p>dictEntry *dictNext(dictIterator *iter)：</p>\n<ol>\n<li>获取字典中的下一个条目。</li>\n</ol>\n</li>\n<li>\n<p>void dictReleaseIterator(dictIterator *iter)：</p>\n<ol>\n<li>释放字典迭代器。</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictGetRandomKey(dict *d)：</p>\n<ol>\n<li>返回字典中的随机条目，用于实现随机算法。</li>\n</ol>\n</li>\n<li>\n<p>unsigned int dictGetSomeKeys(dict *d, dictEntry **des, unsigned int count)：</p>\n<ol>\n<li>从字典中获取一些随机条目，用于采样目的。</li>\n</ol>\n</li>\n<li>\n<p>static void dictDefragBucket(dictEntry **bucketref, dictDefragFunctions *defragfns)：</p>\n<ol>\n<li>使用提供的分配函数，重新分配字典条目、键和值在一个桶中的内存，以进行碎片整理。</li>\n<li>defragfns 是一个包含碎片整理分配函数的结构。</li>\n<li>dictEntry *dictGetFairRandomKey(dict *d)：</li>\n<li>类似于 dictGetRandomKey ()，但尝试确保返回元素的更好分布。</li>\n<li>通过考虑哈希表中可能由不同链长度组成的 N 个桶，选择范围内的一个随机元素，以平滑解决不同链长度的问题。</li>\n</ol>\n</li>\n<li>\n<p>static unsigned long rev(unsigned long v)：</p>\n<ol>\n<li>位反转函数，用于迭代器中。</li>\n</ol>\n</li>\n<li>\n<p>unsigned long dictScan(dict *d, unsigned long v, dictScanFunction *fn, void *privdata)：</p>\n<ol>\n<li>用于迭代字典中的元素，以确保在迭代开始和结束之间返回字典中的所有元素。</li>\n<li>通过反向游标迭代，以处理哈希表可能在迭代调用之间发生大小更改的情况。</li>\n</ol>\n</li>\n<li>\n<p>unsigned long dictScanDefrag(dict *d, unsigned long v, dictScanFunction *fn, dictDefragFunctions *defragfns, void *privdata)：</p>\n<ol>\n<li>类似于 dictScan ()，但额外使用提供的分配函数重新分配字典条目的内存。</li>\n<li>defragfns 包含用于碎片整理的分配函数。</li>\n</ol>\n</li>\n<li>\n<p>static int dictTypeExpandAllowed(dict *d)：</p>\n<ol>\n<li>检查字典类型是否允许进行扩展。</li>\n<li>如果允许扩展，且达到了扩展的条件，调用 dictExpand 进行扩展。</li>\n</ol>\n</li>\n<li>\n<p>static int _dictExpandIfNeeded(dict *d)：</p>\n<ol>\n<li>如果正在进行渐进式 rehashing，直接返回。</li>\n<li>如果哈希表为空，将其扩展到初始大小。</li>\n<li>如果达到 1:1 的比率，并且允许调整哈希表大小，或者应该避免调整但元素 / 桶的比率超过安全阈值，就以两倍的速度扩展哈希表。</li>\n</ol>\n</li>\n<li>\n<p>static signed char _dictNextExp(unsigned long size)：</p>\n<ol>\n<li>返回给定大小的下一个有效的哈希表大小的指数。哈希表的大小是 2 的幂。</li>\n</ol>\n</li>\n<li>\n<p>void *dictFindPositionForInsert(dict *d, const void *key, dictEntry **existing)：</p>\n<ol>\n<li>查找插入位置，如果键已存在，则返回 NULL 并填充 existing，否则返回桶的引用。</li>\n</ol>\n</li>\n<li>\n<p>void dictEmpty(dict <em>d, void(callback)(dict</em>))：</p>\n<ol>\n<li>清空字典，包括两个哈希表。可提供回调函数处理被删除的元素。</li>\n</ol>\n</li>\n<li>\n<p>void dictSetResizeEnabled(dictResizeEnable enable)：</p>\n<ol>\n<li>设置是否允许字典调整大小。</li>\n</ol>\n</li>\n<li>\n<p>uint64_t dictGetHash(dict *d, const void *key)：</p>\n<ol>\n<li>获取键的哈希值。</li>\n</ol>\n</li>\n<li>\n<p>dictEntry *dictFindEntryByPtrAndHash(dict *d, const void *oldptr, uint64_t hash)：</p>\n<ol>\n<li>通过指针和预计算的哈希查找字典中的条目，用于查找特定指针的元素。</li>\n</ol>\n</li>\n<li>\n<p>void dictRehashingInfo(dict *d, unsigned long long *from_size, unsigned long long *to_size)：</p>\n<ol>\n<li>提供正在进行 rehashing 的字典的旧哈希表大小和新哈希表大小信息。</li>\n<li>Debugging 相关函数：\n<ol>\n<li>void dictFreeStats (dictStats *stats)：释放字典统计信息的内存。</li>\n<li>void dictCombineStats (dictStats *from, dictStats *into)：将两个字典统计信息合并。</li>\n<li>dictStats *dictGetStatsHt (dict *d, int htidx, int full)：获取指定哈希表的统计信息。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>size_t dictGetStatsMsg(char *buf, size_t bufsize, dictStats *stats, int full)：</p>\n<ol>\n<li>生成字典统计信息的人类可读消息。</li>\n<li>如果字典为空，返回相关提示信息。</li>\n<li>如果 full 为真，还包括详细的统计信息。</li>\n</ol>\n</li>\n<li>\n<p>void dictGetStats(char *buf, size_t bufsize, dict *d, int full)：</p>\n<ol>\n<li>获取字典的统计信息，包括主哈希表和（如果正在进行 rehashing）rehash 哈希表的信息。</li>\n</ol>\n</li>\n<li>\n<p>Benchmark 相关函数：1.</p>\n<ol>\n<li>BenchmarkDictType 结构体：定义了用于性能测试的字典类型。</li>\n<li>uint64_t hashCallback (const void *key)：哈希回调函数，计算键的哈希值。</li>\n<li>int compareCallback (dict *d, const void *key1, const void *key2)：比较回调函数，比较两个键是否相等。</li>\n<li>void freeCallback (dict *d, void *val)：释放回调函数，释放值的内存。</li>\n<li>char *stringFromLongLong (long long value)：将长长整型值转换为字符串。</li>\n<li>#define start_benchmark ()：宏定义，用于开始计时。</li>\n<li>#define end_benchmark (msg)：宏定义，用于结束计时并输出性能测试结果。</li>\n<li>int dictTest (int argc, char **argv, int flags)：主要的性能测试函数，用于测试字典的插入、访问、删除等操作的性能。</li>\n</ol>\n</li>\n</ul>\n<h1 id=\"二-dictc的主要代码思路\"><a class=\"anchor\" href=\"#二-dictc的主要代码思路\">#</a> 二、dict.c 的主要代码思路</h1>\n<h2 id=\"字典的创建和初始化\"><a class=\"anchor\" href=\"#字典的创建和初始化\">#</a> 字典的创建和初始化：</h2>\n<ul>\n<li>使用 dictCreate 函数创建一个新的字典。</li>\n<li>初始化字典的字段，包括两个哈希表、字典类型等。</li>\n<li>通过 dictSetHashFunctionSeed 设置哈希函数种子。</li>\n</ul>\n<h2 id=\"字典的扩容和-rehash\"><a class=\"anchor\" href=\"#字典的扩容和-rehash\">#</a> 字典的扩容和 rehash：</h2>\n<ul>\n<li>使用 _dictExpandIfNeeded 函数检查是否需要扩容。</li>\n<li>如果需要扩容，调用 dictExpand 进行扩容。</li>\n<li>扩容时，可能触发 rehash 操作，将原哈希表的数据逐步迁移到新哈希表。</li>\n<li>通过 _dictRehashStep 函数完成一步 rehash 操作。</li>\n<li>在 rehash 过程中，遍历原哈希表的每个桶，将其中的元素逐个迁移到新哈希表。</li>\n</ul>\n<h2 id=\"插入元素\"><a class=\"anchor\" href=\"#插入元素\">#</a> 插入元素：</h2>\n<ul>\n<li>使用 dictAdd 函数插入键值对。</li>\n<li>计算键的哈希值，找到对应的哈希桶。</li>\n<li>如果字典正在 rehash，先进行一步 rehash 操作。</li>\n<li>检查是否存在相同的键，如果存在，返回错误。</li>\n<li>创建一个新的 dictEntry，插入到哈希桶的链表中。</li>\n</ul>\n<h2 id=\"查找元素\"><a class=\"anchor\" href=\"#查找元素\">#</a> 查找元素：</h2>\n<ul>\n<li>使用 dictFind 函数查找指定键的条目。</li>\n<li>计算键的哈希值，找到对应的哈希桶。</li>\n<li>在哈希桶的链表中遍历，比较键的值找到相应的条目。</li>\n</ul>\n<h2 id=\"删除元素\"><a class=\"anchor\" href=\"#删除元素\">#</a> 删除元素：</h2>\n<ul>\n<li>使用 dictDelete 函数删除指定键的条目。</li>\n<li>计算键的哈希值，找到对应的哈希桶。</li>\n<li>在哈希桶的链表中遍历，找到并删除相应的条目。</li>\n</ul>\n<h2 id=\"迭代元素\"><a class=\"anchor\" href=\"#迭代元素\">#</a> 迭代元素 ##：</h2>\n<ul>\n<li>使用 dictGetRandomKey 函数随机获取一个键。</li>\n<li>使用 dictScan 函数迭代字典中的所有元素。</li>\n</ul>\n<h2 id=\"性能测试和统计信息\"><a class=\"anchor\" href=\"#性能测试和统计信息\">#</a> 性能测试和统计信息：</h2>\n<ul>\n<li>提供了一系列的性能测试函数，例如 dictTest，用于测试字典操作的性能。</li>\n<li>提供了函数用于获取字典的统计信息，如 dictGetStats。</li>\n</ul>\n<p><strong>总体来说，dict.c 中的代码主要围绕字典的创建、扩容、插入、查找、删除等基本操作展开，同时提供了性能测试和统计信息功能。字典的实现采用了哈希表，支持渐进式 rehash，以确保字典的高效性能。</strong></p>\n<h1 id=\"三-dictc在-redis-中的主要运用方式和作用\"><a class=\"anchor\" href=\"#三-dictc在-redis-中的主要运用方式和作用\">#</a> 三、dict.c 在 Redis 中的主要运用方式和作用#</h1>\n<h2 id=\"存储键值对\"><a class=\"anchor\" href=\"#存储键值对\">#</a> 存储键值对：</h2>\n<ul>\n<li>Redis 中的数据结构，如哈希表、有序集合等，都依赖于 dict.c 实现的字典结构。</li>\n<li>键值对是 Redis 数据模型的基础，而 dict.c 提供了高效的字典实现，用于存储这些键值对。</li>\n</ul>\n<h2 id=\"快速查找\"><a class=\"anchor\" href=\"#快速查找\">#</a> 快速查找：</h2>\n<ul>\n<li>Redis 中经常需要根据键快速查找对应的值，例如通过键获取字符串对象、获取哈希表中的字段等。</li>\n<li>dict.c 提供了高效的查找算法，使得在字典中查找元素的时间复杂度为 O (1)。</li>\n</ul>\n<h2 id=\"哈希算法\"><a class=\"anchor\" href=\"#哈希算法\">#</a> 哈希算法：</h2>\n<ul>\n<li>dict.c 中包含了用于计算键的哈希值的算法，通过哈希值将键均匀地散列到哈希表的各个桶中。</li>\n<li>这有助于保持字典的高效性能，减少哈希冲突的可能性。</li>\n</ul>\n<h2 id=\"动态扩容和-rehash\"><a class=\"anchor\" href=\"#动态扩容和-rehash\">#</a> 动态扩容和 rehash：</h2>\n<ul>\n<li>dict.c 提供了动态扩容的机制，当字典中的元素数量增加时，自动调整哈希表的大小以保持性能。</li>\n<li>在扩容时，dict.c 还实现了渐进式 rehash，逐步将数据从旧哈希表迁移到新哈希表，避免了一次性大规模的数据迁移。</li>\n</ul>\n<h2 id=\"迭代器支持\"><a class=\"anchor\" href=\"#迭代器支持\">#</a> 迭代器支持：</h2>\n<ul>\n<li>dict.c 提供了字典的迭代器，支持按顺序或随机遍历字典中的元素。</li>\n<li>迭代器的实现使得在 Redis 中可以轻松地实现像 HSCAN 这样的命令。</li>\n</ul>\n<h2 id=\"统计信息和性能测试\"><a class=\"anchor\" href=\"#统计信息和性能测试\">#</a> 统计信息和性能测试：</h2>\n<ul>\n<li>dict.c 提供了获取字典统计信息的功能，这对于监控和调优 Redis 实例至关重要。</li>\n<li>性能测试函数，如 dictTest，用于验证字典操作的性能。</li>\n</ul>\n<h2 id=\"在-redis-服务器中的引用\"><a class=\"anchor\" href=\"#在-redis-服务器中的引用\">#</a> 在 Redis 服务器中的引用：</h2>\n<ul>\n<li>Redis 服务器的核心功能，包括数据存储、命令执行等，都依赖于字典结构。</li>\n<li>在 Redis 服务器的核心源码中，大量引用了 dict.c 中提供的字典操作函数，确保数据的高效存储和检索。</li>\n</ul>\n<h2 id=\"在-redis-模块中的引用\"><a class=\"anchor\" href=\"#在-redis-模块中的引用\">#</a> 在 Redis 模块中的引用：</h2>\n<ul>\n<li>Redis 允许用户通过编写模块扩展其功能，而许多模块也需要使用字典结构来管理自己的数据。</li>\n<li>模块开发者可以直接引用 dict.c 中的字典实现，以方便地处理键值对数据。</li>\n</ul>\n<p><strong>总体来说，dict.c 在 Redis 中扮演了关键的角色，为 Redis 提供了高效的键值对存储和检索能力，是 Redis 数据库引擎的重要组成部分。</strong></p>\n",
            "tags": [
                "Hexo",
                "Front Matter"
            ]
        },
        {
            "id": "https://enjundu.github.io/ECEBC/Request%E9%98%85%E8%AF%BB%E6%8A%A5%E5%91%8A/",
            "url": "https://enjundu.github.io/ECEBC/Request%E9%98%85%E8%AF%BB%E6%8A%A5%E5%91%8A/",
            "title": "Request阅读报告",
            "date_published": "2024-07-02T17:41:31.000Z",
            "content_html": "<h1 id=\"requests-html-项目阅读报告\"><a class=\"anchor\" href=\"#requests-html-项目阅读报告\">#</a> Requests-HTML 项目阅读报告</h1>\n<h2 id=\"项目概述\"><a class=\"anchor\" href=\"#项目概述\">#</a> 项目概述</h2>\n<p><strong>requests-html</strong> 是一个用于简化 HTML 解析和网页抓取的 Python 库。它通过结合 requests 库的简单和强大，与<strong> pyquery、beautifulsoup4 和 lxml</strong> 等工具进行二次封装，提供了一个直观的 API，使得网页抓取和 HTML 解析变得更容易。该库不仅支持同步请求，还支持异步请求，能够处理由 JavaScript 驱动的动态内容。</p>\n<h2 id=\"关键特性\"><a class=\"anchor\" href=\"#关键特性\">#</a> 关键特性</h2>\n<ul>\n<li><strong>完整的 JavaScript 支持</strong>：通过 pyppeteer 支持渲染和解析由 JavaScript 动态生成的内容。</li>\n<li><strong>CSS 选择器</strong>：使用 pyquery 提供类似 jQuery 的选择器语法，方便选择 HTML 元素。</li>\n<li><strong>XPath 选择器</strong>：提供对 XPath 的支持，方便使用 XPath 语法选择元素。</li>\n<li><strong>模拟用户代理</strong>：模拟真实的浏览器用户代理，避免被反爬虫机制检测到。</li>\n<li><strong>自动重定向</strong>：自动处理 HTTP 重定向，保持会话的连续性。</li>\n<li><strong>连接池和 Cookie 持久化</strong>：高效的连接处理，保持会话中的 Cookie 持久化。</li>\n<li><strong>异步支持</strong>：允许异步的 HTTP 请求和渲染，提升爬虫的效率。</li>\n</ul>\n<h2 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h2>\n<p>根据<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZXF1ZXN0cy1odG1sLmtlbm5ldGhyZWl0ei5vcmcv\"> requests-html 项目文档</span>可知安装方法为：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pipenv install requests-html</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>仅支持 python3.6 版本 ——Only <strong>Python 3.6</strong> is supported.</li>\n</ul>\n<h2 id=\"设计思路\"><a class=\"anchor\" href=\"#设计思路\">#</a> 设计思路</h2>\n<p>requests-html 设计的核心思想是将常见的 HTML 解析和网页抓取任务简化为直观且强大的 API 操作。它通过结合现有的流行库（如 requests、pyquery、beautifulsoup4 和 lxml），增强了处理复杂网页抓取任务的能力。其主要设计理念包括：</p>\n<ul>\n<li><strong>统一接口</strong>：提供一个统一的接口来处理 HTTP 请求、HTML 解析和 JavaScript 渲染。</li>\n<li><strong>异步支持</strong>：允许用户以异步方式处理网页抓取任务，提高了效率。</li>\n<li><strong>模拟浏览器行为</strong>：通过模拟用户代理和处理重定向，使其行为更像真实浏览器。</li>\n<li><strong>全面的选择器支持</strong>：结合 CSS 和 XPath 选择器，使用户可以灵活地选择和解析 HTML 元素。</li>\n</ul>\n<h2 id=\"源代码分析核心类和函数\"><a class=\"anchor\" href=\"#源代码分析核心类和函数\">#</a> 源代码分析 (核心类和函数)</h2>\n<h3 id=\"htmlsession\"><a class=\"anchor\" href=\"#htmlsession\">#</a> HTMLSession</h3>\n<h4 id=\"用于同步请求的会话类继承自-requestssession\"><a class=\"anchor\" href=\"#用于同步请求的会话类继承自-requestssession\">#</a> 用于同步请求的会话类，继承自 requests.Session。</h4>\n<ul>\n<li><strong>get(url, **kwargs)</strong>：发送 GET 请求，返回 HTMLResponse 对象。</li>\n<li><strong>close()</strong>：关闭会话并关闭浏览器。</li>\n</ul>\n<h3 id=\"asynchtmlsession\"><a class=\"anchor\" href=\"#asynchtmlsession\">#</a> AsyncHTMLSession</h3>\n<h4 id=\"用于异步请求的会话类继承自-requestssession\"><a class=\"anchor\" href=\"#用于异步请求的会话类继承自-requestssession\">#</a> 用于异步请求的会话类，继承自 <strong>requests.Session</strong>。</h4>\n<ul>\n<li><strong>run(*coros)</strong>：运行多个协程，返回结果列表。</li>\n<li><strong>close()</strong>：关闭会话并关闭浏览器。</li>\n</ul>\n<h3 id=\"html\"><a class=\"anchor\" href=\"#html\">#</a> HTML</h3>\n<h4 id=\"表示一个-html-文档提供解析功能\"><a class=\"anchor\" href=\"#表示一个-html-文档提供解析功能\">#</a> 表示一个 HTML 文档，提供解析功能。</h4>\n<ul>\n<li><strong>find(selector,*, containing=None, clean=False, first=False)</strong>：使用 CSS 选择器查找元素。</li>\n<li><strong>xpath(selector, *, clean=False, first=False)</strong>：使用 XPath 选择器查找元素。</li>\n<li><strong>render(**kwargs)</strong>：渲染 JavaScript 内容。</li>\n<li><strong>next(fetch=False, next_symbol=None)</strong>：查找分页链接。</li>\n</ul>\n<h3 id=\"element\"><a class=\"anchor\" href=\"#element\">#</a> Element</h3>\n<h4 id=\"表示一个-html-元素继承自-baseparser\"><a class=\"anchor\" href=\"#表示一个-html-元素继承自-baseparser\">#</a> 表示一个 HTML 元素，继承自 BaseParser。</h4>\n<ul>\n<li><strong>attrs</strong>：返回元素的属性字典。</li>\n<li><strong>text</strong>：返回元素的文本内容。</li>\n<li><strong>full_text</strong>：返回元素的完整文本内容。</li>\n</ul>\n<h2 id=\"设置和配置\"><a class=\"anchor\" href=\"#设置和配置\">#</a> 设置和配置</h2>\n<h3 id=\"setuppy\"><a class=\"anchor\" href=\"#setuppy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL3NldHVwLnB5\">setup.py</span> 文件包含项目的元数据和依赖项：</h3>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setup(</span><br><span class=\"line\">name=<span class=\"string\">&#x27;requests-html&#x27;</span>,</span><br><span class=\"line\">version=<span class=\"string\">&#x27;0.10.0&#x27;</span>,</span><br><span class=\"line\">description=<span class=\"string\">&#x27;HTML Parsing for Humans.&#x27;</span>,</span><br><span class=\"line\">author=<span class=\"string\">&#x27;Kenneth Reitz&#x27;</span>,</span><br><span class=\"line\">author_email=<span class=\"string\">&#x27;me@kennethreitz.org&#x27;</span>,</span><br><span class=\"line\">url=<span class=\"string\">&#x27;https://github.com/psf/requests-html&#x27;</span>,</span><br><span class=\"line\">python_requires=<span class=\"string\">&#x27;&gt;=3.6.0&#x27;</span>,</span><br><span class=\"line\">install_requires=[</span><br><span class=\"line\">\t<span class=\"string\">&#x27;requests&#x27;</span>, <span class=\"string\">&#x27;pyquery&#x27;</span>, <span class=\"string\">&#x27;fake-useragent&#x27;</span>, <span class=\"string\">&#x27;parse&#x27;</span>, <span class=\"string\">&#x27;beautifulsoup4&#x27;</span>, <span class=\"string\">&#x27;w3lib&#x27;</span>, <span class=\"string\">&#x27;pyppeteer&gt;=0.0.14&#x27;</span></span><br><span class=\"line\">],</span><br><span class=\"line\">packages=[<span class=\"string\">&#x27;requests_html&#x27;</span>],</span><br><span class=\"line\">license=<span class=\"string\">&#x27;MIT&#x27;</span>,</span><br><span class=\"line\">classifiers=[</span><br><span class=\"line\">\t<span class=\"string\">&#x27;License :: OSI Approved :: MIT License&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;Programming Language :: Python :: 3.6&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;Programming Language :: Python :: Implementation :: CPython&#x27;</span>,</span><br><span class=\"line\">],</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"测试\"><a class=\"anchor\" href=\"#测试\">#</a> 测试</h3>\n<p>项目包含同步和异步操作的测试，确保分页、属性提取和 JavaScript 渲染的健壮性。例如：</p>\n<h4 id=\"同步分页测试\"><a class=\"anchor\" href=\"#同步分页测试\">#</a> 同步分页测试</h4>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pytest</span><br><span class=\"line\"><span class=\"keyword\">from</span> requests_html <span class=\"keyword\">import</span> HTMLSession</span><br><span class=\"line\"></span><br><span class=\"line\">urls = [</span><br><span class=\"line\"><span class=\"string\">&#x27;https://xkcd.com/1957/&#x27;</span>,</span><br><span class=\"line\"><span class=\"string\">&#x27;https://www.reddit.com/&#x27;</span>,</span><br><span class=\"line\"><span class=\"string\">&#x27;https://github.com/psf/requests-html/issues&#x27;</span>,</span><br><span class=\"line\"><span class=\"string\">&#x27;https://discord.com/category/engineering&#x27;</span>,</span><br><span class=\"line\"><span class=\"string\">&#x27;https://stackoverflow.com/&#x27;</span>,</span><br><span class=\"line\"><span class=\"string\">&#x27;https://www.frontiersin.org/&#x27;</span>,</span><br><span class=\"line\"><span class=\"string\">&#x27;https://azure.microsoft.com/en-us&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@pytest.mark.parametrize(<span class=\"params\"><span class=\"string\">&#x27;url&#x27;</span>, urls</span>)</span></span><br><span class=\"line\"><span class=\"meta\">@pytest.mark.internet</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">test_pagination</span>(<span class=\"params\">url: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">\tsession = HTMLSession()</span><br><span class=\"line\">\tr = session.get(url)</span><br><span class=\"line\">\t<span class=\"keyword\">assert</span> <span class=\"built_in\">next</span>(r.html)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"异步分页测试\"><a class=\"anchor\" href=\"#异步分页测试\">#</a> 异步分页测试</h4>\n<pre><code>import pytest\nfrom requests_html import AsyncHTMLSession\n\nurls = [\n\t'https://xkcd.com/1957/',\n\t'https://www.reddit.com/',\n\t'https://github.com/psf/requests-html/issues',\n\t'https://discord.com/category/engineering',\n\t'https://stackoverflow.com/',\n\t'https://www.frontiersin.org/',\n\t'https://azure.microsoft.com/en-us'\n]\n\n@pytest.mark.parametrize('url', urls)\n@pytest.mark.internet\n@pytest.mark.asyncio\nasync def test_async_pagination(event_loop, url):\n\tasession = AsyncHTMLSession()\n\tr = await asession.get(url)\n\tassert await r.html.__anext__()\n</code></pre>\n<h4 id=\"文件请求测试\"><a class=\"anchor\" href=\"#文件请求测试\">#</a> 文件请求测试</h4>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> requests_html <span class=\"keyword\">import</span> HTMLSession</span><br><span class=\"line\"></span><br><span class=\"line\">session = HTMLSession()</span><br><span class=\"line\">session.mount(<span class=\"string\">&#x27;file://&#x27;</span>, FileAdapter())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get</span>():</span><br><span class=\"line\">\tpath = os.path.sep.join((os.path.dirname(os.path.abspath(__file__)), <span class=\"string\">&#x27;python.html&#x27;</span>))</span><br><span class=\"line\">\turl = <span class=\"string\">f&#x27;file://<span class=\"subst\">&#123;path&#125;</span>&#x27;</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> session.get(url)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">test_file_get</span>():</span><br><span class=\"line\">\tr = get()</span><br><span class=\"line\">\t<span class=\"keyword\">assert</span> r.status_code == <span class=\"number\">200</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"文档配置\"><a class=\"anchor\" href=\"#文档配置\">#</a> 文档配置</h3>\n<h4 id=\"confpy\"><a class=\"anchor\" href=\"#confpy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL2NvbmYucHk=\">conf.py</span> 文件设置了 Sphinx 文档，包括扩展和项目信息：</h4>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests_html</span><br><span class=\"line\"></span><br><span class=\"line\">project = <span class=\"string\">&#x27;requests-HTML&#x27;</span></span><br><span class=\"line\">author = <span class=\"string\">&#x27;Kenneth Reitz&#x27;</span></span><br><span class=\"line\">version = <span class=\"string\">&#x27;v0.3.4&#x27;</span></span><br><span class=\"line\">extensions = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;sphinx.ext.autodoc&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;sphinx.ext.doctest&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;sphinx.ext.intersphinx&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;sphinx.ext.todo&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;sphinx.ext.coverage&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;sphinx.ext.viewcode&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;sphinx.ext.githubpages&#x27;</span>,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"使用方法\"><a class=\"anchor\" href=\"#使用方法\">#</a> 使用方法</h2>\n<h3 id=\"同步请求\"><a class=\"anchor\" href=\"#同步请求\">#</a> 同步请求</h3>\n<ul>\n<li>\n<p>向 <span class=\"exturl\" data-url=\"aHR0cDovL3B5dGhvbi5vcmc=\">python.org</span> 发起同步 GET 请求并提取链接：<br />\nfrom requests_html import HTMLSession</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">session = HTMLSession()</span><br><span class=\"line\">r = session.get(<span class=\"string\">&#x27;https://python.org/&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 提取所有链接</span></span><br><span class=\"line\">links = r.html.links</span><br><span class=\"line\"><span class=\"built_in\">print</span>(links)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 提取绝对链接</span></span><br><span class=\"line\">absolute_links = r.html.absolute_links</span><br><span class=\"line\"><span class=\"built_in\">print</span>(absolute_links)</span><br></pre></td></tr></table></figure></p>\n</li>\n<li>\n<p>示例结果为：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;//docs.python.org/3/tutorial/&#x27;</span>, <span class=\"string\">&#x27;/about/apps/&#x27;</span>, <span class=\"string\">&#x27;https://github.com/python/pythondotorg/issues&#x27;</span>, ...&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;https://docs.python.org/3/tutorial/&#x27;</span>, <span class=\"string\">&#x27;https://www.python.org/about/apps/&#x27;</span>, <span class=\"string\">&#x27;https://github.com/python/pythondotorg/issues&#x27;</span>, ...&#125;</span><br></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h3 id=\"异步请求\"><a class=\"anchor\" href=\"#异步请求\">#</a> 异步请求</h3>\n<ul>\n<li>\n<p>通过 requests_html 库发起异步 GET 请求并运行多个协程：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> requests_html <span class=\"keyword\">import</span> AsyncHTMLSession</span><br><span class=\"line\">\tasession = AsyncHTMLSession()</span><br><span class=\"line\">\t<span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">get_python</span>():  </span><br><span class=\"line\">\t  r = <span class=\"keyword\">await</span> asession.get(<span class=\"string\">&#x27;https://python.org/&#x27;</span>)  </span><br><span class=\"line\">\t  <span class=\"keyword\">return</span> r  </span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">get_reddit</span>():</span><br><span class=\"line\">\t  r = <span class=\"keyword\">await</span> asession.get(<span class=\"string\">&#x27;https://reddit.com/&#x27;</span>)</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span> r </span><br><span class=\"line\">\tresults = asession.run(get_python, get_reddit)</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> result <span class=\"keyword\">in</span> results:</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(result.html.url)  </span><br></pre></td></tr></table></figure></p>\n</li>\n<li>\n<p>异步请求结果示例</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://www.python.org/  </span><br><span class=\"line\">https://www.reddit.com/</span><br></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h3 id=\"解析html\"><a class=\"anchor\" href=\"#解析html\">#</a> 解析 HTML</h3>\n<ul>\n<li>\n<p>选择元素并提取属性</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r = session.get(<span class=\"string\">&#x27;https://python.org/&#x27;</span>)</span><br><span class=\"line\">about = r.html.find(<span class=\"string\">&#x27;#about&#x27;</span>, first=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 提取文本</span></span><br><span class=\"line\">text = about.text</span><br><span class=\"line\"><span class=\"built_in\">print</span>(text)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 提取属性</span></span><br><span class=\"line\">attributes = about.attrs</span><br><span class=\"line\"><span class=\"built_in\">print</span>(attributes)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 渲染 HTML</span></span><br><span class=\"line\">html_content = about.html</span><br><span class=\"line\"><span class=\"built_in\">print</span>(html_content)</span><br></pre></td></tr></table></figure></p>\n</li>\n<li>\n<p>解析 HTML 结果示例</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">About</span><br><span class=\"line\">Applications</span><br><span class=\"line\">Quotes</span><br><span class=\"line\">Getting Started</span><br><span class=\"line\">Help</span><br><span class=\"line\">Python Brochure</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;id&#x27;</span>: <span class=\"string\">&#x27;about&#x27;</span>, <span class=\"string\">&#x27;class&#x27;</span>: (<span class=\"string\">&#x27;tier-1&#x27;</span>, <span class=\"string\">&#x27;element-1&#x27;</span>), <span class=\"string\">&#x27;aria-haspopup&#x27;</span>: <span class=\"string\">&#x27;true&#x27;</span>&#125;</span><br><span class=\"line\">&lt;li aria-haspopup=<span class=\"string\">&quot;true&quot;</span> <span class=\"keyword\">class</span>=<span class=\"string\">&quot;tier-1 element-1 &quot;</span> <span class=\"built_in\">id</span>=<span class=\"string\">&quot;about&quot;</span>&gt;\\n&lt;a <span class=\"keyword\">class</span>=<span class=\"string\">&quot;&quot;</span> href=<span class=\"string\">&quot;/about/&quot;</span> title=<span class=\"string\">&quot;&quot;</span>&gt;About&lt;/a&gt;\\n&lt;ul aria-hidden=<span class=\"string\">&quot;true&quot;</span> <span class=\"keyword\">class</span>=<span class=\"string\">&quot;subnav menu&quot;</span> role=<span class=\"string\">&quot;menu&quot;</span>&gt;\\n&lt;li <span class=\"keyword\">class</span>=<span class=\"string\">&quot;tier-2 element-1&quot;</span> role=<span class=\"string\">&quot;treeitem&quot;</span>&gt;&lt;a href=<span class=\"string\">&quot;/about/apps/&quot;</span> title=<span class=\"string\">&quot;&quot;</span>&gt;Applications&lt;/a&gt;&lt;/li&gt;\\n&lt;li <span class=\"keyword\">class</span>=<span class=\"string\">&quot;tier-2 element-2&quot;</span> role=<span class=\"string\">&quot;treeitem&quot;</span>&gt;&lt;a href=<span class=\"string\">&quot;/about/quotes/&quot;</span> title=<span class=\"string\">&quot;&quot;</span>&gt;Quotes&lt;/a&gt;&lt;/li&gt;\\n&lt;li <span class=\"keyword\">class</span>=<span class=\"string\">&quot;tier-2 element-3&quot;</span> role=<span class=\"string\">&quot;treeitem&quot;</span>&gt;&lt;a href=<span class=\"string\">&quot;/about/gettingstarted/&quot;</span> title=<span class=\"string\">&quot;&quot;</span>&gt;Getting Started&lt;/a&gt;&lt;/li&gt;\\n&lt;li <span class=\"keyword\">class</span>=<span class=\"string\">&quot;tier-2 element-4&quot;</span> role=<span class=\"string\">&quot;treeitem&quot;</span>&gt;&lt;a href=<span class=\"string\">&quot;/about/help/&quot;</span> title=<span class=\"string\">&quot;&quot;</span>&gt;Help&lt;/a&gt;&lt;/li&gt;\\n&lt;li <span class=\"keyword\">class</span>=<span class=\"string\">&quot;tier-2 element-5&quot;</span> role=<span class=\"string\">&quot;treeitem&quot;</span>&gt;&lt;a href=<span class=\"string\">&quot;http://brochure.getpython.info/&quot;</span> title=<span class=\"string\">&quot;&quot;</span>&gt;Python Brochure&lt;/a&gt;&lt;/li&gt;\\n&lt;/ul&gt;\\n&lt;/li&gt;</span><br></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h3 id=\"xpath选择器\"><a class=\"anchor\" href=\"#xpath选择器\">#</a> XPath 选择器</h3>\n<ul>\n<li>\n<p>提取 html 指定元素的 XPath</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r = session.get(<span class=\"string\">&#x27;https://python.org/&#x27;</span>)</span><br><span class=\"line\">about = r.html.xpath(<span class=\"string\">&#x27;//div[@id=&quot;about&quot;]&#x27;</span>, first=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 提取文本</span></span><br><span class=\"line\">text = about.text</span><br><span class=\"line\"><span class=\"built_in\">print</span>(text)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 提取属性</span></span><br><span class=\"line\">attributes = about.attrs</span><br><span class=\"line\"><span class=\"built_in\">print</span>(attributes)</span><br></pre></td></tr></table></figure></p>\n</li>\n<li>\n<p>XPath 选择器结果示例：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">About</span><br><span class=\"line\">Applications</span><br><span class=\"line\">Quotes</span><br><span class=\"line\">Getting Started</span><br><span class=\"line\">Help</span><br><span class=\"line\">Python Brochure</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;id&#x27;</span>: <span class=\"string\">&#x27;about&#x27;</span>, <span class=\"string\">&#x27;class&#x27;</span>: (<span class=\"string\">&#x27;tier-1&#x27;</span>, <span class=\"string\">&#x27;element-1&#x27;</span>), <span class=\"string\">&#x27;aria-haspopup&#x27;</span>: <span class=\"string\">&#x27;true&#x27;</span>&#125;</span><br></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h3 id=\"渲染-javascript-内容\"><a class=\"anchor\" href=\"#渲染-javascript-内容\">#</a> 渲染 JavaScript 内容</h3>\n<ul>\n<li>\n<p>示例代码：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r = session.get(<span class=\"string\">&#x27;http://python-requests.org/&#x27;</span>)</span><br><span class=\"line\">r.html.render()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 搜索渲染后的内容</span></span><br><span class=\"line\">months = r.html.search(<span class=\"string\">&#x27;Python 2 will retire in only &#123;months&#125; months!&#x27;</span>)[<span class=\"string\">&#x27;months&#x27;</span>]</span><br><span class=\"line\"><span class=\"built_in\">print</span>(months)</span><br></pre></td></tr></table></figure></p>\n</li>\n<li>\n<p>结果示例：</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">25</span></span><br></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h3 id=\"处理分页\"><a class=\"anchor\" href=\"#处理分页\">#</a> 处理分页</h3>\n<ul>\n<li>\n<p>代码示例</p>\n<p>r = session.get('<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRkaXQuY29t\">https://reddit.com</span>')<br />\nfor html in r.html:<br />\nprint(html)</p>\n</li>\n<li>\n<p>结果示例</p>\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;HTML url=<span class=\"string\">&#x27;https://www.reddit.com/&#x27;</span>&gt;</span><br><span class=\"line\">&lt;HTML url=<span class=\"string\">&#x27;https://www.reddit.com/?count=25&amp;after=t3_81puu5&#x27;</span>&gt;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h2 id=\"结论\"><a class=\"anchor\" href=\"#结论\">#</a> 结论</h2>\n<p>requests-html 是一个功能强大且易于使用的库，通过集成 JavaScript 渲染和异步请求，扩展了传统 HTML 解析和网页抓取的能力。它与 requests 库的无缝集成，使其成为处理复杂网页抓取任务的绝佳选择。无论是处理简单的静态页面还是复杂的动态内容，requests-html 都提供了一个直观且高效的解决方案。</p>\n<h2 id=\"项目心得\"><a class=\"anchor\" href=\"#项目心得\">#</a> 项目心得</h2>\n<p>在这个项目中，我深入研究了 requests-html 库，并对其功能和设计进行了详细分析和实践。通过这个项目，我不仅熟悉了 requests-html 的使用方法，还掌握了一些高级的网页抓取技巧。</p>\n<p><strong>学习与使用</strong></p>\n<p>首先，我被 requests-html 库的简洁性和强大功能所吸引。这个库基于 requests 构建，结合了 pyquery、beautifulsoup4 和 lxml 等工具，使得 HTML 解析和网页抓取变得更加直观和高效。安装和设置过程也非常简单，只需几行命令即可开始使用。</p>\n<p><strong>同步与异步请求</strong></p>\n<p>在实际使用中，我发现 requests-html 对同步和异步请求的支持非常实用。通过 HTMLSession 和 AsyncHTMLSession，我可以轻松地发起同步和异步的 HTTP 请求，并处理由 JavaScript 动态生成的内容。特别是在处理大量请求时，异步支持显著提高了效率。</p>\n<p><strong>JavaScript 渲染</strong></p>\n<p>一个令我印象深刻的功能是 requests-html 对 JavaScript 渲染的支持。通过 pyppeteer，我能够渲染和解析动态生成的内容，这在现代网页抓取中是至关重要的。我尝试了多个网站，包括一些使用复杂 JavaScript 生成内容的网站，requests-html 都能顺利完成任务。</p>\n<p><strong>CSS 与 XPath 选择器</strong></p>\n<p>在解析 HTML 内容时，requests-html 提供的 CSS 和 XPath 选择器极大地方便了我的工作。我可以使用类似 jQuery 的语法快速定位和提取网页中的元素，同时也可以使用 XPath 进行更复杂的查询。这使得解析和处理网页内容变得更加灵活和高效。</p>\n<p><strong>模拟用户代理与自动重定向</strong></p>\n<p>在实际应用中，避免被反爬虫机制检测到是一个重要的考虑因素。requests-html 通过模拟真实的浏览器用户代理，有效减少了被封禁的风险。此外，它还自动处理 HTTP 重定向，保持会话的连续性，确保抓取过程顺利进行。</p>\n<p><strong>代码实现与测试</strong></p>\n<p>在编写和测试代码的过程中，我进一步理解了 requests-html 的内部机制。通过阅读和分析源码，我了解到每个核心类和函数的具体实现原理。这不仅提升了我的编程技能，也让我对网页抓取有了更深入的认识。</p>\n<p>我编写了一些测试用例，包括同步和异步分页测试、文件请求测试等，确保了代码的健壮性和可靠性。通过这些测试，我验证了 requests-html 在不同场景下的表现，发现它确实是一个功能强大且易于使用的库。</p>\n<p><strong>结论</strong></p>\n<p>总的来说，这次项目经历让我受益匪浅。requests-html 不仅简化了网页抓取的复杂性，还提供了强大的功能，满足了我在处理动态内容和大量请求时的需求。通过这个项目，我对网页抓取技术有了更全面的理解，也积累了丰富的实践经验。今后，我会继续探索和使用这个库，进一步提升我的技术能力。</p>\n",
            "tags": [
                "Hexo",
                "Front Matter"
            ]
        }
    ]
}